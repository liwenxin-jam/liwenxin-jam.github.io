<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="liwenxin-jam's blog"><meta name="keywords" content="liwenxin, jam, blog, 个人博客"><title>Vue的旁门左道 | 前端工程狮_jam</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Vue的旁门左道</h1><a id="logo" href="/.">前端工程狮_jam</a><p class="description">人都会成长，过程在自己</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Vue的旁门左道</h1><div class="post-meta"><p><span class="date">Aug 11, 2021</span><span><a href="/categories/vue/" class="category">vue</a></span></p></div><div class="post-content"><p>基于<a href="https://www.bilibili.com/video/BV1Zy4y1K7SH" target="_blank" rel="noopener">【尚硅谷】Web前端迅速上手Vue教程丨vue3.0入门到精通</a>，记录相关知识点，达到备忘录的目的</p>
<h2 id="风格指南"><a href="#风格指南" class="headerlink" title="风格指南"></a>风格指南</h2><ul>
<li><a href="https://cn.vuejs.org/v2/style-guide/" target="_blank" rel="noopener">风格指南</a>推荐</li>
</ul>
<h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><ul>
<li>如出现下载缓慢请配置npm淘宝镜像</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br><span class="line">npm view vue versions</span><br></pre></td></tr></table></figure>
<ul>
<li>Vue-Cli脚手架隐藏了所有webpack相关的配置，若想查看具体的webpack配置</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">vue</span> <span class="selector-tag">inspect</span> &gt; <span class="selector-tag">output</span><span class="selector-class">.js</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>vue-devtools </p>
<p>谷歌插件<a href="https://chrome.google.com/webstore/detail/vuejs-devtools/ljjemllljcmogpfapbkkighbhhppjdbg?utm_source=chrome-ntp-icon" target="_blank" rel="noopener">Vue.js devtools</a>，注意beta版才支持vue3(vuex不支持)，以前的只支持vue2</p>
<ol>
<li>开启允许访问文件网址（支持本地调试）</li>
</ol>
</li>
</ul>
<h2 id="vm与vc"><a href="#vm与vc" class="headerlink" title="vm与vc"></a>vm与vc</h2><ul>
<li>vm是实例对象，如const vm = new Vue({ data: {} }); data可以是一个普通对象/函数对象</li>
<li>vc是组件实例对象，如Vue.component(options)、Vue.extend(options); data必须是一个函数对象。</li>
<li>一个重要的内置关系：VueComponent.prototype.<strong> proto </strong>  ===  Vue.prototype  (让组件实例对象vc可以访问Vue原型上的属性、方法)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vc组件实例跟下边vm实例对象区别：因为组件是可复用的 Vue 实例，所以它们与 new Vue 接收相同的选项，例如 data、computed、watch、methods 以及生命周期钩子等。仅有的例外是像 el 这样根实例特有的选项。</span></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue().$mount(<span class="string">'#app'</span>);</span><br></pre></td></tr></table></figure>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><ul>
<li><p>v-html</p>
<ul>
<li><p>指令作用：向指定节点中渲染包含html结构的内容</p>
</li>
<li><p>与插值语法的区别：</p>
<p>a. v-html会替换掉节点中所有的内容，不会</p>
<p>b. v-html可以识别html结构，区别v-text指令</p>
</li>
<li><p>注意：v-html有安全性问题</p>
<p>a. 在网站上动态渲染任意HTML是非常危险的，容易导致XSS攻击</p>
<p>b. 一定要在可信的内容上使用v-html，永不要用在用户提交的内容上！</p>
</li>
<li><p><a href="https://chrome.google.com/webstore/detail/cookie-editor/hlkenndednhfkekhgcdicdfddnkalmdm?utm_source=chrome-ntp-icon" target="_blank" rel="noopener">Cookie-Editor</a></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie <span class="comment">// 只显示非http-only的</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>v-cloak指令（没有值）:</p>
<ol>
<li>本质是一个特殊属性，Vue实例创建完比并接管容器后，会删掉v-cloak属性</li>
<li>使用css配合v-cloak可以解决网速慢时页面展示出的问题</li>
</ol>
</li>
<li><p>指令函数何时会被调用？（区别指令对象不同函数时机）</p>
<ol>
<li>指令与元素成功绑定时</li>
<li>指令所在的模板被重新解析时（任意数据变化）</li>
</ol>
</li>
<li><p>注意：</p>
<ol>
<li>指令函数无法使用data数据，它的this是指向window，可以考虑把data某个属性传参进去，如果考虑的是数据传递，可以考虑借助dataset方式传递</li>
<li>指令名如果是多个单词，要使用kebab-case(短横线)命名方式，不要用camelCase(小驼峰)命名方式（注意：定义组件名称(属性)也建议用kebab-case，大写组件名(属性)必须vue-cli脚手架才行，直接引入vue不行，自闭合组件标签同理，多个只会渲染一个）</li>
<li>其它自带指令：v-once(只渲染一次)、v-pre(跳过编译)</li>
</ol>
</li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[v-cloak]</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: none; <span class="comment">// 常规配套使用</span></span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;span v-big='n'&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="comment">// &lt;input type="text" v-fbing:value="n"&gt;</span></span><br><span class="line"></span><br><span class="line">directives: &#123;</span><br><span class="line">  <span class="comment">// 1.指令函数，有bind和update效果</span></span><br><span class="line">	big(element, binding) &#123;</span><br><span class="line">		element.innerText = binding.value * <span class="number">10</span></span><br><span class="line">	&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 2.指令对象</span></span><br><span class="line">	fbing: &#123;</span><br><span class="line">    <span class="comment">// 指令与元素成功绑定时</span></span><br><span class="line">		bind(element, binding) &#123;</span><br><span class="line">      element.value = binding.value</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 指令所在元素被插入页面时，需要在此阶段做特殊处理</span></span><br><span class="line">		inserted(element, binding) &#123;</span><br><span class="line">      element.focus()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 指令所在的模板被重新解析时（任意数据变化）</span></span><br><span class="line">		update(element, binding) &#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 全局指令</span></span><br><span class="line"><span class="comment">// Vue.directive('fbing', function() &#123;&#125;)  </span></span><br><span class="line"><span class="comment">// Vue.directive('fbing', &#123; &#125;)</span></span><br></pre></td></tr></table></figure>
<h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><ul>
<li><p>定义：对要显示的数据进行特定格式式再显示（适用于一些简单逻辑的处理）,vue3取消了，推荐用方法或计算属性实现</p>
</li>
<li><p>语法：</p>
<ol>
<li><p>注册过滤器：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.filter(name, callback) 或 vc组件实例对象 &#123; <span class="attr">filters</span>: &#123;&#125; &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用过滤器：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; xx | 过滤器<span class="number">1</span> | 过滤器<span class="number">2</span>() &#125;&#125; 或 v-bind:属性=<span class="string">"xx | 过滤器名()"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>备注：</p>
<ol>
<li>过滤器也可以接收额外参数、多个过滤器也可以串联</li>
<li>并没有改变原本的数据，是产生新的对应的数据</li>
</ol>
</li>
</ul>
<h2 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h2><ul>
<li>事件修饰符，支持链式使用，passive和prevent冲突，不能同时绑定在一个监听器上</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- </span><br><span class="line">.capture (捕获事件，父捕获子) </span><br><span class="line">.stop (阻止事件冒泡，子冒泡父) </span><br><span class="line">w3c的方法是e.stopPropagation()，IE则是使用e.cancelBubble = true</span><br><span class="line">document.addEventListener(event, function, useCapture=false)</span><br><span class="line">.self (event.target是当前操作元素才触发事件，避免捕获和冒泡事件触发) </span><br><span class="line"></span><br><span class="line">.prevent (阻止默认事件，e.preventDefault()，如a标签默认跳转) </span><br><span class="line">.once (只触发一次) </span><br><span class="line">.passive (事件的默认行为立刻执行，无需等待事件回调执行完毕，如@scoll，@touchmove，@wheel防止页面卡顿)</span><br><span class="line"> --&gt;</span><br><span class="line">&lt;div @scroll.passive=&quot;scroll&quot;&gt;&lt;/div&gt;&lt;!-- up、down或按住滚动条滚动 --&gt;</span><br><span class="line">&lt;div @wheel.passive=&quot;wheel&quot;&gt;&lt;/div&gt;&lt;!-- 鼠标滚轮 --&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>键盘修饰符，Vue默认提供以下9个按键别名，未提供的可以用按键原始的key值去绑定，如 caps-lock(短横线命名)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> 正常配合keyup使用</span></span><br><span class="line"><span class="comment">.enter：回车键</span></span><br><span class="line"><span class="comment">.tab：制表键  特殊，需要配合keydown</span></span><br><span class="line"><span class="comment">.delete：含delete和backspace键</span></span><br><span class="line"><span class="comment">.esc：返回键</span></span><br><span class="line"><span class="comment">.space: 空格键</span></span><br><span class="line"><span class="comment">.up：向上键</span></span><br><span class="line"><span class="comment">.down：向下键</span></span><br><span class="line"><span class="comment">.left：向左键</span></span><br><span class="line"><span class="comment">.right：向右键</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>系统修饰符（用法特殊）: ctrl、alt、shift、meta(win/command)</p>
<ol>
<li><p>配合keyup使用，需要组合键释放了才能触发，例如ctrl+a</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div @keyup.ctrl=&quot;handler&quot;&gt;&lt;/div&gt; &lt;!-- 不会正常触发 --&gt;</span><br><span class="line">&lt;div @keyup.ctrl.a=&quot;handler&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配合keydown正常使用</p>
</li>
</ol>
</li>
<li><p>自定义键名，Vue.config.keyCodes.自定义键名(huiche) = 键码 （跟编码@keyup.13一样不推荐，语义化不清晰和浏览器编码不一定保持一致）</p>
</li>
<li><p>v-model修饰符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/** .lazy(转变为在change事件再同步) .number(自动将用户的输入值转化为数值类型) .trim(自动过滤用户输入的首尾空格) **/</span><br><span class="line">&lt;input v-model.lazy=&quot;msg&quot;&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义(第三方)组件修饰符 .native</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-model=&quot;form.name&quot; placeholder=&quot;昵称&quot; @keyup.enter=&quot;submit&quot;&gt;</span><br><span class="line">&lt;el-input v-model=&quot;form.name&quot; placeholder=&quot;昵称&quot; @keyup.enter.native=&quot;submit&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">&lt;!-- 会把click事件当成自定义事件，需要$emit(&apos;click&apos;)来触发 --&gt;</span><br><span class="line">&lt;my-component @click=&apos;handler&apos;&gt;&lt;/my-component&gt;</span><br><span class="line">&lt;!-- 会把click事件当成原生事件，vue3取消了.native --&gt;</span><br><span class="line">&lt;my-component @click.native=&apos;handler&apos;&gt;&lt;/my-component&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="props"><a href="#props" class="headerlink" title="props"></a>props</h2><ul>
<li><p>单向数据流</p>
<p>简单类型不允许直接改，复杂类型(引用地址)不能重新赋值，但能直接用v-model实现双向绑定(不建议)</p>
</li>
<li><p>不仅能传递数据，也能传递方法(不推荐)</p>
<ol>
<li><p>自定义事件(除了click、keyup、keydown外) @eventName=handler <--> $emit(‘eventName’) ,如在子组件绑定自定义事件，就由子组件来$emit派发，回调写在父组件的handler方法上</--></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 哪个vc $emit就由哪个vc解绑$off</span></span><br><span class="line"><span class="keyword">this</span>.$off(<span class="string">'eventName'</span>)  <span class="comment">// 解绑一个自定义事件</span></span><br><span class="line"><span class="keyword">this</span>.$off([<span class="string">'eventName1'</span>, <span class="string">'eventName2'</span>])  <span class="comment">// 解绑多个自定义事件</span></span><br><span class="line"><span class="keyword">this</span>.$off()  <span class="comment">// 解绑所有的自定义事件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// vc实例销毁会让所有自定义事件失效，但不影响默认事件，如click</span></span><br><span class="line"><span class="comment">// 注意：data绑定的数据也会失去响应式效果，即事件触发了页面不响应</span></span><br><span class="line"><span class="keyword">this</span>.$destroy()</span><br></pre></td></tr></table></figure>
</li>
<li><p>this.$refs.childVc.$on(‘eventName’, function(){ console.log(this) }) 灵活处理绑定时机</p>
<p>谁派发谁监听，注意function里面的this指向this.$refs.childVc，而不是指向当前写这行代码的vc父组件实例。记住谁触发了自定义事件，事件回调当中的this就指向谁。 改写成：this.$refs.vc.$on(‘eventName’, () =&gt; {}) </p>
</li>
</ol>
</li>
<li><p>$attrs与$listeners</p>
<ol>
<li>inheritAttrs，默认为true，父作用域的非props的属性会自动绑定到根节点上</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;component :a=&quot;a&quot; :b=&quot;b&quot; @cb=&quot;cb&quot;&gt;&lt;/component&gt;</span><br><span class="line"></span><br><span class="line"> 	&lt;div&gt;</span><br><span class="line">    &lt;!-- 当前组件不需要，传递下去 --&gt;</span><br><span class="line">		&lt;child v-bind=&quot;$attrs&quot; v-on=&quot;$listeners&quot;&gt;&lt;/child&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 通过定义props接收数据和emit自定义事件派发出去 --&gt;</span><br><span class="line">  &lt;grandson&gt;</span><br><span class="line">    &lt;div @click=&quot;emit(&apos;cb&apos;, &apos;我是grandson&apos;)&quot;&gt;&#123;&#123; b &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;/grandson&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h2><ul>
<li>作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信的方式，适用于 父组件  ===&gt; 子组件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- category分类组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;category&quot;&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123;title&#125;&#125;分类&lt;/h3&gt;</span><br><span class="line">    &lt;!-- 定义一个默认插槽 --&gt;</span><br><span class="line">    &lt;slot :test=&quot;test&quot; msg=&quot;handsome boy&quot;&gt; &lt;!-- 给作用域插槽传递一个公共数据test、msg --&gt;</span><br><span class="line">      &lt;span&gt;我是默认显示值&lt;/span&gt;</span><br><span class="line">  	&lt;/slot&gt;</span><br><span class="line">    &lt;!-- 定义一个具名插槽 footer --&gt;</span><br><span class="line">    &lt;slot name=&quot;footer&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      test: [&apos;1&apos;, &apos;2&apos;, &apos;3&apos;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  span &#123;</span><br><span class="line">    color: blue;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件，里面引用了category分类组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;category title=&quot;默认显示&quot;&gt;</span><br><span class="line">    &lt;!-- 会默认绑定在vc上的$slots，即使组件内部没有定义slot --&gt;</span><br><span class="line">    &lt;span&gt;默认显示&lt;/span&gt;</span><br><span class="line">  &lt;/category&gt;</span><br><span class="line"></span><br><span class="line">  &lt;category title=&quot;默认插槽&quot;&gt;</span><br><span class="line">    &lt;span&gt;Welcome to here!&lt;span&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot;&gt;Hello，Vue！&lt;span&gt;</span><br><span class="line">    &lt;!-- 另一种写法，只支持 template --&gt;</span><br><span class="line">    &lt;template v-slot:footer&gt;Hello，Vue！&lt;template&gt;</span><br><span class="line">    &lt;!-- vue3推荐使用v-slot和# --&gt;</span><br><span class="line">    &lt;template #footer&gt;Hello，Vue！&lt;template&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;!-- 作用域插槽，只支持 template，支持解构 --&gt;</span><br><span class="line">    &lt;template scope=&quot;data&quot;&gt;&#123;&#123; data.test &#125;&#125;&lt;/template&gt;</span><br><span class="line">		&lt;template scope=&quot;&#123; test &#125;&quot;&gt;&#123;&#123; test &#125;&#125;&lt;/template&gt;</span><br><span class="line">		&lt;!-- 另一种写法 --&gt;</span><br><span class="line">		&lt;template slot-scope=&quot;&#123; test &#125;&quot;&gt;&#123;&#123; test &#125;&#125;&lt;/template&gt;</span><br><span class="line">  &lt;/category&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  span &#123;</span><br><span class="line">    color: blue;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="全局事件总线-eventBus"><a href="#全局事件总线-eventBus" class="headerlink" title="全局事件总线 eventBus"></a>全局事件总线 eventBus</h2><ul>
<li>适用于任意组件间通信。注意如果利用事件总线$on绑定自定义事件，需要自己手动在beforeDestroy钩子中触发$off解绑。常规下vc自身的$on绑定，在vm销毁下会自动清除自定义事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vue(); <span class="comment">// 声明一个Vue 实例</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> EventBus <span class="keyword">from</span> <span class="string">'@utils/eventBUS'</span>;</span><br><span class="line"><span class="comment">// EventBus.$on</span></span><br><span class="line">Vue.prototype.$eventBus = EventBus;</span><br><span class="line"><span class="comment">// this.$eventBus.$on</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种</span></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">  beforeCreate() &#123;</span><br><span class="line">    Vue.prototype.$eventBus = <span class="keyword">this</span> <span class="comment">// 安装全局事件总线</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>pubsub-js(消息订阅发布)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pubsub <span class="keyword">from</span> <span class="string">'pubsub-js'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 订阅（监听）</span></span><br><span class="line"><span class="keyword">this</span>.pubsubId = pubsub.subscribe(<span class="string">'messageName'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msgName, data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'有人发布了messageName消息，messageName消息的回调执行了'</span>, msgName, data)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 发布（通知）</span></span><br><span class="line">pubsub.publish(<span class="string">'messageName'</span>, <span class="number">666</span>)</span><br><span class="line"></span><br><span class="line">beforeDestroy() &#123;</span><br><span class="line">  <span class="comment">// 取消订阅，类似定时器，有次订阅都有一个唯一ID，需要借助唯一ID取消</span></span><br><span class="line">  pubsub.unsubscribe(<span class="keyword">this</span>.pubsubId)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> vue;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> vuex;</span><br><span class="line"><span class="comment">// 应用Vuex插件</span></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正常是import进来的</span></span><br><span class="line"><span class="keyword">const</span> otherOptions = &#123;</span><br><span class="line">  namespaced: <span class="literal">true</span>, <span class="comment">// 是否支持命名空间访问，默认为false</span></span><br><span class="line">  state: &#123;&#125;,</span><br><span class="line">  getters: &#123;&#125;,</span><br><span class="line">  actions: &#123;&#125;,</span><br><span class="line">  mutations: &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在实例化store前，必须先引入插件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Vuex.Stroe(&#123;</span><br><span class="line">  <span class="comment">// 用于存储数据，不建议在非mutaions方法下直接修改state，devtool无法监测</span></span><br><span class="line">  state: &#123;&#125;,</span><br><span class="line">  <span class="comment">// 用于将state中的数据进行加工，类似自己写computed</span></span><br><span class="line">  getters: &#123;&#125;, </span><br><span class="line">  <span class="comment">// 用于响应组件中的动作，常用于共用复杂业务和异步操作</span></span><br><span class="line">  actions: &#123;&#125;, <span class="comment">// 方法名建议小驼峰</span></span><br><span class="line">  <span class="comment">// 用于同步操作数据(state)，在devtool追踪数据变化</span></span><br><span class="line">  mutations: &#123;&#125;, <span class="comment">// 方法名建议大驼峰或者全大写(下划线隔开)，区别actions中的方法</span></span><br><span class="line">  <span class="comment">// 子模块数据，里面结构跟根节点保持一致，即同样拥有state、mutations...</span></span><br><span class="line">  modules: &#123;</span><br><span class="line">    <span class="comment">// otherOptions,</span></span><br><span class="line">    a: otherOptions,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ol>
<li>mapState方法用于帮助我们映射state中的数据为计算属性</li>
<li>mapGetters方法用于帮助我们映射getters中的数据为计算属性</li>
<li>mapActions方法生成对应的指定方法，方法中会调用dispatch去联系action</li>
<li>mapMutations方法生成对应的指定方法，方法中会调用commit去联系mutation</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123; mapState, mapGetters, mapMutations, mapActions &#125; from &apos;vuex&apos;;</span><br><span class="line">  </span><br><span class="line">  export default &#123;</span><br><span class="line">    computed: &#123;</span><br><span class="line">      // 第一种写法，对象形式，key和state中的名称不一致的情况</span><br><span class="line">      ...mapState(&#123; key: &apos;stateName&apos; &#125;),</span><br><span class="line">      // 第二种写法，数组简写形式</span><br><span class="line">      ...mapState([&apos;stateName&apos;]),</span><br><span class="line">        </span><br><span class="line">      // 同理mapState</span><br><span class="line">      ...mapGetters(&#123; key: &apos;gettersName&apos; &#125;),</span><br><span class="line">      ...mapGetters([&apos;gettersName&apos;]),</span><br><span class="line">      </span><br><span class="line">      // 注意需要自己在模板主动给funcName传参，默认参数是事件对象event</span><br><span class="line">      ...mapMutations(&#123; funcName: &apos;MutationFuncName&apos; &#125;),</span><br><span class="line">      ...mapMutations([&apos;MutationFuncName&apos;]),</span><br><span class="line">      // 同理mapMutations</span><br><span class="line">    	...mapActions(&#123; funcName: &apos;MutationFuncName&apos; &#125;),</span><br><span class="line">      ...mapActions([&apos;MutationFuncName&apos;]),</span><br><span class="line">  </span><br><span class="line">  		// 子模块a</span><br><span class="line">  		...mapState([&apos;a&apos;]),</span><br><span class="line">      // 借助命名空间namespaced访问</span><br><span class="line">      ...mapState(&apos;a&apos;, [&apos;stateName1&apos;, &apos;stateName2&apos;]),</span><br><span class="line">      ...mapState(&apos;b&apos;, [&apos;stateName1&apos;, &apos;stateName2&apos;]),</span><br><span class="line">      ...mapMutations(&apos;a&apos;, &#123; funcName: &apos;MutationFuncName&apos; &#125;),</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      test() &#123;</span><br><span class="line">        console.log(this.$store)</span><br><span class="line">        this.$store.stateName1</span><br><span class="line">        // 子模块 获取state某个数据</span><br><span class="line">        this.$store.a.stateName1</span><br><span class="line">        // 注意getters会跟state有所区别</span><br><span class="line">        this.$store.getters[&apos;a/getterName&apos;]</span><br><span class="line">        </span><br><span class="line">        // dispatch action方法同理</span><br><span class="line">        this.$store.commit(&apos;mutationName&apos;, params)</span><br><span class="line">        this.$store.commit(&apos;a/mutationName&apos;, params)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Vue-Router"><a href="#Vue-Router" class="headerlink" title="Vue-Router"></a>Vue-Router</h2><ul>
<li>一个路由(route)就是一组映射关系(key-value)，多个路由需要路由器(router)进行管理</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'../components/home'</span></span><br><span class="line"><span class="keyword">import</span> About <span class="keyword">from</span> <span class="string">'../components/about'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    <span class="comment">// 默认hash，history(刷新404)需要后端配合，例如nginx</span></span><br><span class="line">  	<span class="comment">// 前端自己搭node静态服务器，推荐express + connect-history-api-fallback</span></span><br><span class="line">  	mode: <span class="string">'history'</span>,  </span><br><span class="line">    <span class="comment">// 支持嵌套路由，在router-view的位置上显示</span></span><br><span class="line">    routes: [</span><br><span class="line">        <span class="comment">// 前端路由：key是路径，value是组件</span></span><br><span class="line">        &#123;</span><br><span class="line">            name: <span class="string">'home'</span>, <span class="comment">// 命名路由，name需要唯一，路由路径过长简化访问</span></span><br><span class="line">            path: <span class="string">'/home'</span>,</span><br><span class="line">            meta: &#123; <span class="attr">title</span>: <span class="string">'XX'</span> &#125;, <span class="comment">// 路由元信息，用户自定义数据</span></span><br><span class="line">            component: Home,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'/about'</span>,</span><br><span class="line">            component: About,</span><br><span class="line">            <span class="comment">// 嵌套路由，配置子路由</span></span><br><span class="line">            children: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// 非一级路由，path不需要加/</span></span><br><span class="line">                    path: <span class="string">'news'</span>,</span><br><span class="line">                    componet: News,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    path: <span class="string">'message'</span>,</span><br><span class="line">                    componet: Message,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    name: <span class="string">'detail'</span>,</span><br><span class="line">                    <span class="comment">// 动态路由，绑定params参数</span></span><br><span class="line">                    path: <span class="string">'detail/:id'</span>, <span class="comment">// :id 占位符，声明接收</span></span><br><span class="line">                    componet: Detail,</span><br><span class="line">                    <span class="comment">// 路由支持传参，有三种写法</span></span><br><span class="line">                    <span class="comment">// 1.该对象中所有key-value都会以props的形式传给Detail组件</span></span><br><span class="line">                    props: &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="string">'2'</span>&#125;,</span><br><span class="line">                    <span class="comment">// 2.值为布尔值，若为真，会把该路由组件收到的所有params参数，以props的形式传给Detail组件</span></span><br><span class="line">                    props: <span class="literal">true</span>,</span><br><span class="line">                    <span class="comment">// 3.值为函数，以props的形式传给Detail组件</span></span><br><span class="line">                    props($route) &#123; <span class="comment">// 支持解构</span></span><br><span class="line">                        <span class="keyword">return</span> &#123; <span class="attr">id</span>: $route.query.id, <span class="attr">name</span>: $route.query.name&#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>
<ul>
<li>每个组件都有自己的$route属性，里面存储着自己的路由信息</li>
<li>整个应用只有一个router，可以通过组件的$router属性获取全部路由</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;!-- 传统方式，用a标签实现页面跳转 --&gt;</span><br><span class="line">	&lt;a class=&quot;active&quot; href=&quot;./home.html&quot;&gt;home&lt;/a&gt;</span><br><span class="line">	&lt;a class=&quot;active&quot; href=&quot;./aboute.html&quot;&gt;about&lt;/a&gt;</span><br><span class="line">	&lt;!-- 插件会自动转化成a标签 active-class指定激活高亮样式名 --&gt;</span><br><span class="line">	&lt;router-link active-class=&quot;active&quot; to=&quot;/home&quot;&gt;home&lt;/router-link&gt;</span><br><span class="line">	&lt;router-link active-class=&quot;active&quot; to=&quot;/about&quot;&gt;about&lt;/router-link&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 不需要传递其它参数，用简写方式即可，默认是push追加历史记录，replace替换当前记录，没法后退/前进 --&gt;</span><br><span class="line">	&lt;router-link replace active-class=&quot;active&quot; :to=&quot;&#123; path: &apos;/home&apos;&#125;&quot;&gt;home&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 二级路由 --&gt;</span><br><span class="line">	&lt;router-link active-class=&quot;active&quot; to=&quot;/about/news&quot;&gt;about&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- query传参 --&gt;</span><br><span class="line">	&lt;router-link active-class=&quot;active&quot; to=&quot;/about/detail?id=666&amp;title=你好&quot;&gt;about&lt;/router-link&gt;</span><br><span class="line">	&lt;!-- 字符串写法 --&gt;</span><br><span class="line">	&lt;router-link active-class=&quot;active&quot; :to=&quot;`/about/detail?id=$&#123;item.id&#125;`&quot;&gt;about&lt;/router-link&gt;</span><br><span class="line">	&lt;!-- 对象写法 --&gt;</span><br><span class="line">	&lt;router-link active-class=&quot;active&quot; :to=&quot;&#123;</span><br><span class="line">    	path: &apos;/about/detail&apos;,</span><br><span class="line">        query: &#123;</span><br><span class="line">            id: item.id                                    </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;&quot;&gt;about&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- params传参，其它写法参照query传参 --&gt;</span><br><span class="line">	&lt;router-link active-class=&quot;active&quot; to=&quot;/about/detail/666&quot;&gt;about&lt;/router-link&gt;</span><br><span class="line">	&lt;!-- 注意：对象写法params不允许跟path，只能配置name --&gt;</span><br><span class="line">	&lt;router-link active-class=&quot;active&quot; :to=&quot;&#123;</span><br><span class="line">    	// path: &apos;/about/detail&apos;, </span><br><span class="line">        name: &apos;detail&apos;,                                </span><br><span class="line">        params: &#123;</span><br><span class="line">            id: item.id                                    </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;&quot;&gt;about&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 指定组件的呈现位置 --&gt;</span><br><span class="line">	&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">	&lt;!-- 允许路由嵌套显示 --&gt;</span><br><span class="line">	&lt;router-view&gt;</span><br><span class="line">        &lt;!-- 缓存路由组件，保持挂载，不被销毁，不加include会默认把所有组件都缓存 --&gt;</span><br><span class="line">        &lt;!-- include组件名称，配置生命周期钩子 activated(激活，mounted)、deactivated(未激活，beforeDestroy) --&gt;</span><br><span class="line">        &lt;!-- &lt;keep-alive include=&quot;News&quot;&gt; --&gt;</span><br><span class="line">        &lt;keep-alive :include=&quot;[&apos;News&apos;, &apos;Message&apos;]&quot;&gt;</span><br><span class="line">			&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">        &lt;/keep-alive&gt;</span><br><span class="line">    &lt;/router-view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        name: &apos;News&apos;, // 组件名称</span><br><span class="line">        props: [&apos;a&apos;, &apos;b&apos;],</span><br><span class="line">        mounted() &#123;</span><br><span class="line">            console.log(this.$route)</span><br><span class="line">            this.$router.push(&quot;/home&quot;)</span><br><span class="line">            this.$router.replace(&#123;</span><br><span class="line">                path: &apos;/about/detail&apos;,</span><br><span class="line">                query: &#123;</span><br><span class="line">                    id: item.id                                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            this.$router.forward() // 前进一步</span><br><span class="line">            this.$router.go(-1) // 正数前进N步，负数后退N步</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>路由守卫，区分全局路由、独享路由、组件路由</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局前置路由守卫 -- 初始化的时候和每次路由切换之前被调用</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 常用鉴权</span></span><br><span class="line">  next() <span class="comment">// 放行</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 全局后置路由守卫 -- 初始化的时候和每次路由切换之后被调用</span></span><br><span class="line">router.afterEach(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 更改浏览器窗口显示标题</span></span><br><span class="line">  <span class="built_in">document</span>.title = to.meta.title || <span class="string">'默认标题'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 独享路由守卫</span></span><br><span class="line">routes: [</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'home'</span>, </span><br><span class="line">    path: <span class="string">'/home'</span>,</span><br><span class="line">    component: Home,</span><br><span class="line">    <span class="comment">// 只有前置，没有后置，进入页面组件之前</span></span><br><span class="line">    beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 类似beforeEach对它单独做一些判断</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 组件路由守卫</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 通过路由规则，进入该组件时被调用</span></span><br><span class="line">  beforeRouteEnter(to, <span class="keyword">from</span>, next) =&gt; &#123;&#125;</span><br><span class="line">  <span class="comment">// 通过路由规则，离开该组件时被调用</span></span><br><span class="line">  beforeRouteLeave(to, <span class="keyword">from</span>, next) =&gt; &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="动画-transition、transition-group"><a href="#动画-transition、transition-group" class="headerlink" title="动画 transition、transition-group"></a>动画 transition、transition-group</h2><ul>
<li>作用：在插入、更新或移除DOM元素时，在合适的时候给元素添加样式类名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;!-- appear 刚出现就展示一次动画 --&gt;</span><br><span class="line">	&lt;transition name=&quot;hello&quot; appear&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;isShow&quot;&gt;你好啊！&lt;/h1&gt;</span><br><span class="line">  &lt;/transition&gt;</span><br><span class="line">	&lt;!-- 多个同时动画，注意需要加key --&gt;</span><br><span class="line">	&lt;transition-group name=&quot;hello&quot; appear&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;isShow&quot; key=&quot;1&quot;&gt;你好啊！&lt;/h1&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;isShow&quot; key=&quot;2&quot;&gt;你好啊！&lt;/h1&gt;</span><br><span class="line">  &lt;/transition&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isShow: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  /** 默认不加name，是v-enter-active **/</span><br><span class="line">  .hello-enter-active &#123;</span><br><span class="line">    animation: test 0.5s linear;</span><br><span class="line">  &#125;</span><br><span class="line">  .hello-leave-active &#123;</span><br><span class="line">    animation: test 0.5s linear;</span><br><span class="line">  &#125;</span><br><span class="line">  @keyframes test &#123;</span><br><span class="line">    from &#123;</span><br><span class="line">      transform: translateX(-100%);</span><br><span class="line">    &#125;</span><br><span class="line">    to &#123;</span><br><span class="line">      transform: translateX(0);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /** 不管是进入还是离开都分别有三个类名 **/</span><br><span class="line">  h1 &#123;</span><br><span class="line">    /** 第一种 **/</span><br><span class="line">    transition: 0.5s linear;</span><br><span class="line">  &#125;</span><br><span class="line">  /** 进入的起点，离开的终点 **/</span><br><span class="line">  .hello-enter, .hello-leave-to &#123;</span><br><span class="line">    transform: translateX(-100%);</span><br><span class="line">  &#125;</span><br><span class="line">  /** 进入的过渡，离开的过渡 **/</span><br><span class="line">  .hello-enter-active, .hello-leave-avtive &#123;</span><br><span class="line">    /** 第二种 **/</span><br><span class="line">    transition: 0.5s linear;</span><br><span class="line">  &#125;</span><br><span class="line">  /** 进入的终点，离开的起点 **/</span><br><span class="line">  .hello-enter-to, .hello-leave &#123;</span><br><span class="line">    transform: translateX(0);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>第三方动画库 <a href="https://animate.style/#utilities" target="_blank" rel="noopener">animate</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;transition-group appear name=&quot;animate__animated animate__bounce&quot; enter-active-class=&quot;animate__swing&quot; leave-active-class=&quot;animate__backOutUp&quot;&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;isShow&quot; key=&quot;1&quot;&gt;你好啊！&lt;/h1&gt;</span><br><span class="line">    &lt;h1 v-show=&quot;isShow&quot; key=&quot;2&quot;&gt;你好啊！&lt;/h1&gt;</span><br><span class="line">  &lt;/transition&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &apos;animate.css&apos;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isShow: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h2><ul>
<li><p>接口请求方式</p>
<ol>
<li>xhr (new XMLHttpRequest()、xhr.open()、xhr.send())</li>
<li>jQuery ($.get、$.post)</li>
<li>axios (内核是xhr，提供$axios，vue-resource插件$http)</li>
<li>fetch (弊端：IE不兼容，返回数据会包两层)</li>
</ol>
</li>
<li><p>跨域方式</p>
<ol>
<li><p>cors (Access-Control-Allow-Origin)</p>
</li>
<li><p>jsonp (script src get)</p>
</li>
<li><p>vue-cli </p>
<ul>
<li>官方文档 <a href="https://cli.vuejs.org/zh/config/#devserver-proxy" target="_blank" rel="noopener">devserver-proxy</a></li>
<li>proxy可参考中间件 <a href="https://github.com/chimurai/http-proxy-middleware#proxycontext-config" target="_blank" rel="noopener">http-proxy-middleware</a></li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line">devServer: &#123;</span><br><span class="line">    <span class="comment">// 任何未知请求 (没有匹配到静态文件的请求) 代理到 http://localhost:8000</span></span><br><span class="line">    <span class="comment">// 弊端：会优先查找根目录下public文件夹里的，找不到再到代理服务器上找</span></span><br><span class="line">	proxy: 'http://localhost:8000'</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">proxy: &#123;</span><br><span class="line">    <span class="comment">// 更多的代理控制行为，跟 .env.development 配置使用 </span></span><br><span class="line">    [process.env.VUE_APP_URL]: &#123;</span><br><span class="line">        target: '&lt;url&gt;', // 代理目标的基础路径</span><br><span class="line">        ws: true, // 是否启用支持websockets，默认为true</span><br><span class="line">        secure: false, // 使用的是http协议则设置为false，https协议则设置为true</span><br><span class="line">        changeOrigin: true, // 开启代理，是否保持一致的域名访问(善意的谎言)，默认为true</span><br><span class="line">        pathRewrite: &#123; [`^$&#123;process.env.VUE_APP_URL&#125;`]: '' &#125;, // 重写路径</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>nginx (反向代理)</p>
</li>
</ol>
</li>
</ul>
<h2 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h2><ul>
<li>实例化</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue2是Vue构造函数，vue3是createApp的工厂函数</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// vue2是 new Vue(&#123; render: h =&gt; h(App) &#125;).$mount('#app')</span></span><br><span class="line">createApp(App).mount(<span class="string">'#app'</span>) <span class="comment">// 创建应用实例对象 vm</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Composition API(组合式API)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- vue3支持多个根节点 fragment --&gt;</span><br><span class="line">  &lt;div&gt;Hello，Vue3!&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; name &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123; h, ref, reactive, computed, watch, watchEffect &#125; from &apos;vue&apos;</span><br><span class="line">  </span><br><span class="line">  export default &#123;</span><br><span class="line">    // setup接收参数必须先定义</span><br><span class="line">    props: [&apos;msg&apos;],</span><br><span class="line">    // setup中的context.emit触发自定义事件必须先声明，不声明当成是原生事件，如click</span><br><span class="line">    emits: [&apos;callback&apos;],</span><br><span class="line">    // 尽量不要与vue2.x配置混用，这里支持写data、methdos、computed</span><br><span class="line">    // vue2方法里能访问setup配置的属性，setup无法访问vue2的属性</span><br><span class="line">    // 如果有重名，setup优先</span><br><span class="line">    // setup不能是一个async函数，因为返回的不再是一个对象，而是一个promise，模板看不到return对象中的属性，可以借助动态加载组件 + suspense可以做到</span><br><span class="line">    // 在beforeCreate之前执行，setup里面的this是undefined</span><br><span class="line">    setup(props, context) &#123; // context支持解构&#123; attrs,emit,slots &#125;</span><br><span class="line">      </span><br><span class="line">      // 生命周期钩子 销毁 &lt;--&gt; 卸载</span><br><span class="line">      // vue2 beforeCreate、created、beforeMount、mounted、beforeUpdate、updated、beforeDestroy、destroyed </span><br><span class="line">      // composition API是括号内的对应关系</span><br><span class="line">      // vue3 beforeCreate(setup)、created(setup)、beforeMount(onBeforeMount)、mounted(onMounted)、beforeUpdate(onBeforeUpdate)、updated(onUpdated)、beforeUnmount(onBeforeUnmount)、unmounted(onUnmounted)</span><br><span class="line">      </span><br><span class="line">      // 如果需要写异步接口，建议用箭头函数包装多一层</span><br><span class="line">      const func = async () =&gt; &#123;</span><br><span class="line">        const &#123; data &#125; = await apiFunc()</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      // 简单类型 name是RefImpl 引用对象 get set</span><br><span class="line">      let name = ref(&apos;xx&apos;);</span><br><span class="line">      // 在js中修改需要 .value</span><br><span class="line">      name.value = &apos;handsome boy&apos;</span><br><span class="line">      </span><br><span class="line">      // 复杂类型 info是RefImpl 而info.value是Proxy引用对象(内部借助reactive) </span><br><span class="line">      let info = ref(&#123; name: &apos;xx&apos; &#125;);</span><br><span class="line">      info.value.name = &apos;handsome boy&apos;</span><br><span class="line">      </span><br><span class="line">      // 不支持简单类型reactive(666)，通过Proxy代理数据劫持，再通过Reflect反射源对象</span><br><span class="line">      let info = reactive([&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]);</span><br><span class="line">      // vue2无法监测到响应式，需要借助this.$set(info, 0, &apos;aa&apos;)</span><br><span class="line">      info[0] = &apos;aa&apos;;</span><br><span class="line">      </span><br><span class="line">      // 计算属性，简写形式，支持分开写 get()&#123;&#125; 和 set()&#123;&#125;</span><br><span class="line">      let fullName = computed(() =&gt; &#123;</span><br><span class="line">        return person.firstName + person.lastName;</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      // 监听属性,接收4种类型(ref、reactive、array、function) </span><br><span class="line">      // let name = ref(name) 此外监听不需要name.value</span><br><span class="line">      watch(name, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">      &#125;,&#123; immediate: true, deep: true &#125;)</span><br><span class="line">      // 同时监听多个，newVal和oldVal是一个数组</span><br><span class="line">      watch([a, b], (newVal, oldVal) =&gt; &#123;</span><br><span class="line">      &#125;)</span><br><span class="line">      // 监听ref能够正常，监听reactive是引用类型无法正常(新旧地址一致，且deep失效)</span><br><span class="line">      watch(state, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">      &#125;,&#123; deep: true &#125;)</span><br><span class="line">      watch(() =&gt; state.age, (newVal, oldVal) =&gt; &#123;&#125;)</span><br><span class="line">      watch([() =&gt; state.age], (newVal, oldVal) =&gt; &#123;&#125;)</span><br><span class="line">      // 监听对象中的某个属性需要开启深度监听，但依旧无法真正获取真正的oldVal，let obj = ref(&#123;&#125;)同理</span><br><span class="line">      watch(() =&gt; state.obj, (newVal, oldVal) =&gt; &#123;&#125;,&#123;deep:true&#125;)</span><br><span class="line">      </span><br><span class="line">      // 有点类似computed原理，里面用到哪些响应式数据，当它们改变时就会触发，但不需要返回值</span><br><span class="line">      watchEffect(() =&gt; &#123;</span><br><span class="line">        if (state.status) &#123;</span><br><span class="line">          // do something</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      // hooks，类似vue2的mixin</span><br><span class="line">      // useMousePosition.ts</span><br><span class="line">      import &#123; onBeforeUnmount, onMounted, ref &#125; from &apos;vue</span><br><span class="line">      export default function () &#123;</span><br><span class="line">        const x = ref(-1) ; // x 绑定为响应式数据</span><br><span class="line">        const y = ref(-1);</span><br><span class="line">        const clickHandler=(event:MouseEvent)=&gt;&#123;</span><br><span class="line">          x.value = event.pageX</span><br><span class="line">          y.value = event.pageY</span><br><span class="line">        &#125; </span><br><span class="line">        onMounted(()=&gt;&#123;</span><br><span class="line">          window.addEventListener(&apos;click&apos;, clickHandlker)</span><br><span class="line">        &#125;)</span><br><span class="line">        onBeforeUnmount(()=&gt;&#123;</span><br><span class="line">          window.removeEventListner(&apos;click&apos;, clickHandler)</span><br><span class="line">        &#125;)</span><br><span class="line">        return &#123;</span><br><span class="line">          x,</span><br><span class="line">          y</span><br><span class="line">        &#125;</span><br><span class="line">       &#125;</span><br><span class="line">      </span><br><span class="line">      import useMousePosition from &apos;./hooks/useMousePosition&apos;</span><br><span class="line">			export default &#123;</span><br><span class="line">        setup() &#123;</span><br><span class="line">          // 这里就用了 hooks 函数, 从而提高了复用性</span><br><span class="line">          const &#123;x, y&#125; = useMousePosition() </span><br><span class="line"></span><br><span class="line">          return &#123;</span><br><span class="line">            x,</span><br><span class="line">            y,</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      // toRef、toRefs</span><br><span class="line">      let person = reactive(&#123;</span><br><span class="line">        name: &apos;xx&apos;,</span><br><span class="line">        age: 18</span><br><span class="line">      &#125;)</span><br><span class="line">      const name1 = person.name; // xx</span><br><span class="line">      // 作用：toRef创建一个ref对象，其value值指向另一个对象中的某个属性</span><br><span class="line">      // 应用：要将响应式对象中的某个属性单独提供给外部使用时</span><br><span class="line">      const name2 = toRef(person, &apos;name&apos;); // ObjectRefImpl</span><br><span class="line">      </span><br><span class="line">      // 浅层次(第一层)数据的响应式</span><br><span class="line">      // 应用：如果有一个对象数据，结构比较深，但变化时只是外层属性变化</span><br><span class="line">      let person = shallowReactive(&#123;</span><br><span class="line">        name: &apos;xx&apos;,</span><br><span class="line">        age: 18,</span><br><span class="line">        info: &#123;</span><br><span class="line">          name: &apos;xx&apos;,</span><br><span class="line">        	age: 18,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      // 传递普通类型跟ref没区别，如果传递的是一个对象，无法实时响应对象的值，person.value是普通对象(非proxy)</span><br><span class="line">      // 应用：如果有一个对象数据，后续功能不会修改该对象中的属性，而是生成新的对象来替换</span><br><span class="line">      let person = shallowRef(&#123;</span><br><span class="line">        name: &apos;xx&apos;,</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      // readonly(深只读)不允许修改属性，shallReadonly(浅只读)允许修改嵌套属性(非根属性)</span><br><span class="line">      let person = readonly(reactive(&#123;</span><br><span class="line">        name: &apos;xx&apos;,</span><br><span class="line">        info: &#123;</span><br><span class="line">          name: &apos;xx&apos;,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;))</span><br><span class="line">      </span><br><span class="line">      // toRaw把响应式对象reactive处理成普通对象，没法处理ref</span><br><span class="line">      state = toRaw(state)</span><br><span class="line">      // markRaw，标记一个对象，不再是一个响应式对象</span><br><span class="line">      // 应用：当渲染具有不可变数据源的大列表时，跳过响应式转换提高性能</span><br><span class="line">      state.info = markRaw(state.info)</span><br><span class="line">      </span><br><span class="line">      // 创建一个自定义的ref(精装修与毛坯customRef)，并对其依赖项跟踪和更新触发进行显式控制</span><br><span class="line">      const myRef(value, delay = 500) &#123;</span><br><span class="line">        let timer</span><br><span class="line">        // customRef(value) === ref(value)</span><br><span class="line">        return customRef((track, trigger) =&gt; &#123;</span><br><span class="line">          return &#123;</span><br><span class="line">            get() &#123;</span><br><span class="line">              // 通知Vue追踪value的变化</span><br><span class="line">              track();</span><br><span class="line">              return value;</span><br><span class="line">            &#125;,</span><br><span class="line">            set(newValue) &#123;</span><br><span class="line">              clearTimeout(timer)</span><br><span class="line">              timer = setTimeout(() =&gt; &#123;</span><br><span class="line">                value = newValue;</span><br><span class="line">                // 通知Vue去重新解析模板</span><br><span class="line">                trigger();</span><br><span class="line">              &#125;, delay);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      let testMyRef = myRef(&apos;hello&apos;)</span><br><span class="line">      </span><br><span class="line">      // provide与inject 适用于祖与后代(跨级)组件间通信</span><br><span class="line">      provide(&apos;car&apos;, car); // 给自己的后代组件传递数据</span><br><span class="line">      // car是响应式，接收到的也是响应式，使用inject必须先provide</span><br><span class="line">      let car = inject(&apos;car&apos;)</span><br><span class="line">      </span><br><span class="line">      // 响应式数据的判断</span><br><span class="line">      isRef：检查一个值是否为一个ref对象</span><br><span class="line">      isReactive：检查一个对象是否是由reactive创建的响应式代理</span><br><span class="line">      isReadonly：检查一个对象是否是由readonly创建的只读代理</span><br><span class="line">      isProxy：检查一个对象是否由reactive或者readonly方法创建的代理</span><br><span class="line">      </span><br><span class="line">      // 常用，返回一个对象，则对象中的属性、方法在模板中均可以直接使用</span><br><span class="line">      return &#123; </span><br><span class="line">        // toRefs与toRef功能一致，但可以批量创建多个ref对象</span><br><span class="line">        toRefs(person),</span><br><span class="line">        name</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      // 返回一个渲染函数，会覆盖template结构</span><br><span class="line">      return () =&gt; h(&apos;h1&apos;, &apos;handsome boy&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>新的组件</p>
<ul>
<li><p>Fragment</p>
<ul>
<li>在Vue2中：组件必须有一个根标签</li>
<li>在Vue3中：组件可以没有根标签，内部会将多个标签包含在一个Fragment虚拟元素中</li>
<li>好处：减少标签层级，减小内存占用</li>
</ul>
</li>
<li><p>Teleport(传送)</p>
</li>
<li><p>Suspense</p>
<ul>
<li>等待异步组件时渲染一些额外内容，让应用有更好的用户体验，底层也是两个插槽，一个用来展示异步加载内容还没回来的时候，一个用来展示真正要显示的内容</li>
</ul>
<ol>
<li>使用defineAysncComponent异步引入组件</li>
<li>使用suspense包裹组件，并配置好default与fallback</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;Suspense&gt;</span><br><span class="line">    &lt;template v-slot:default&gt;</span><br><span class="line">      &lt;child /&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template v-slot:fallback&gt;</span><br><span class="line">      &lt;h3&gt;稍等，加载中...&lt;/h3&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">	&lt;/Suspense&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// import Child from &apos;./components/child&apos; // 静态引入</span><br><span class="line">import &#123; defineAsyncComponent &#125; from &apos;vue&apos;</span><br><span class="line">const Child = defineAsyncComponent(()=&gt;import(&apos;./components/child&apos;) // 动态(异步)引入</span><br><span class="line">                                   </span><br><span class="line">export default &#123;</span><br><span class="line">	components: &#123; Child &#125;,                                   </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- child组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;我是Child组件&lt;/h3&gt;</span><br><span class="line">    &#123;&#123; sum &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref &#125; from &apos;vue&apos;</span><br><span class="line">                                   </span><br><span class="line">export default &#123;</span><br><span class="line">  // 借助Suspense和异步引入组件，可以async</span><br><span class="line">	async setup() &#123;</span><br><span class="line">    let sum = ref(0)</span><br><span class="line">    let p = new Promise((resolve, reject)=&gt;&#123;</span><br><span class="line">      setTimeout(()=&gt;&#123; resolve(&#123; sum &#125;)&#125;, 1000)</span><br><span class="line">    &#125;)</span><br><span class="line">    return await p</span><br><span class="line">  &#125;                                  </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>vue2迁移vue3改变</p>
<ul>
<li><a href="https://v3.cn.vuejs.org/guide/migration/introduction.html#%E6%A6%82%E8%A7%88" target="_blank" rel="noopener">官网</a></li>
</ul>
</li>
</ul>
<h2 id="v-for中的key的有什么作用？"><a href="#v-for中的key的有什么作用？" class="headerlink" title="v-for中的key的有什么作用？"></a>v-for中的key的有什么作用？</h2><ul>
<li>虚拟DOM中key的作用:<ul>
<li>key是虚拟DOM对象的标识，当数据发生变化时，Vue会根据【新数据】生成【新的虚拟DOM】，随后Vue进行【新虚拟DOM】与【旧虚拟DOM】的差异比较，比较规则如下：</li>
</ul>
</li>
<li>对比规则：<ol>
<li>旧虚拟DOM中找到了与新虚拟DOM相同的key:<ol>
<li>若虚拟DOM中内容没变，直接使用之前的真实DOM！</li>
<li>若虚拟DOM中内容变了，则生成新的真实DOM，随后替换页面中之前的真实DOM。</li>
</ol>
</li>
<li>旧虚拟DOM中未找到与新虚拟DOM相同的key，创建新的真实DOM，随后渲染到页面。</li>
</ol>
</li>
<li>用index作为key可能会引发的问题：<ol>
<li>若对数据进行逆序添加、逆序删除等破坏顺序操作：会产生没有必要的真实DOM更新  ==》 界面效果没问题，但效率低</li>
<li>如果结构中还包含输入类的DOM：会产生错误DOM更新 ==》 界面有问题</li>
</ol>
</li>
<li>开发中如何选择key?<ol>
<li>最好使用每条数据的唯一标识作为key，比如id、手机号、身份证号、学号等唯一值</li>
<li>如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表用于展示，使用index作为key是没有问题的</li>
</ol>
</li>
</ul>
<h2 id="模拟一个数据监测"><a href="#模拟一个数据监测" class="headerlink" title="模拟一个数据监测"></a>模拟一个数据监测</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">	name: <span class="string">'jam'</span>,</span><br><span class="line">  age: <span class="string">'20'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象响应式，vue2基于Object.defineProperty(obj, prop, descriptor)，vue3基于new Proxy(target, handler)</span></span><br><span class="line"><span class="comment">// 错误示范，死循环</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(data, <span class="string">'name'</span>, &#123;</span><br><span class="line">	<span class="keyword">get</span>() &#123;</span><br><span class="line">		<span class="keyword">return</span> data.name;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="keyword">set</span>(val) &#123;</span><br><span class="line">		data.name = val;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">                </span><br><span class="line"><span class="comment">// Vue2 创建一个监视的实例对象，用于监视data中的属性的变化</span></span><br><span class="line"><span class="keyword">const</span> ob = <span class="keyword">new</span> Observer(data);</span><br><span class="line">funtion Observer(obj) &#123;</span><br><span class="line">  <span class="comment">// 汇总对象中所有的属性形成一个数组</span></span><br><span class="line">  <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(obj);</span><br><span class="line">  <span class="comment">// 遍历</span></span><br><span class="line">  keys.forEach(<span class="function"><span class="params">k</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 对属性的读取、修改进行拦截(数据劫持)</span></span><br><span class="line">    <span class="comment">// 存在问题：新增属性、删除属性，界面不会更新</span></span><br><span class="line">    <span class="built_in">Object</span>.defaineProperty(<span class="keyword">this</span>, k, &#123;</span><br><span class="line">      <span class="keyword">get</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> obj[k];</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="keyword">set</span>(val) &#123;</span><br><span class="line">        obj[k] = val;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;     </span><br><span class="line"><span class="comment">// const vm = new Vue(&#123;&#125;) </span></span><br><span class="line"><span class="comment">// vm.data.name = vm._data.name // _data 实际就是一个ob实例对象</span></span><br><span class="line">                           </span><br><span class="line"><span class="comment">// Vue3通过Proxy(代理)：拦截对象中任意属性的变化，包括：属性值的读写、属性的添加、属性的删除等</span></span><br><span class="line"><span class="comment">// 通过Reflect(反射)：对源对象的属性进行操作。ECMA团队正在考虑把Object里的方法往Reflect迁移</span></span><br><span class="line"><span class="comment">// Proxy与Reflect是对立关系，先代理再反射</span></span><br><span class="line"><span class="keyword">const</span> ob = <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, &#123;</span><br><span class="line">  <span class="comment">// 读取</span></span><br><span class="line">	<span class="keyword">get</span>(target, propName) &#123;</span><br><span class="line">    <span class="comment">// return target[propName];</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, propName);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 新增、修改 post put</span></span><br><span class="line">  <span class="keyword">set</span>(target, propName, value) &#123;</span><br><span class="line">    <span class="comment">// target[propName] = value;</span></span><br><span class="line">    <span class="built_in">Reflect</span>.set(target, propName, value);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 删除</span></span><br><span class="line">  deleteProperty(target, propName) &#123;</span><br><span class="line">    <span class="comment">// return delete target[propName];</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.deleteProperty(target, propName);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="数据双向绑定响应"><a href="#数据双向绑定响应" class="headerlink" title="数据双向绑定响应"></a>数据双向绑定响应</h2><ul>
<li>Vue会监视数据的原理：</li>
</ul>
<ol>
<li><p>vue会监视data中所有层次的数据</p>
</li>
<li><p>如何监测对象中的数据？</p>
<p>通过setter实现监视，且要在new Vue时就传入要监测的数据。</p>
<p>a. 对象中后追加的属性，Vue默认不做响应式处理</p>
<p>b. 如需给后添加的属性做响应式，请使用如下API：</p>
<p>​    Vue.set(target, propertyName/index, value) </p>
<p>​    vm.$set(target, propertyName/index, value)</p>
</li>
<li><p>如何监测数组中的数据？</p>
<p>通过包裹数组更新元素的方法实现，本质就是做了两件事：</p>
<p>a. 调用原生对应的方法对数组进行更新</p>
<p>b. 重新解析模板，进而更新页面</p>
</li>
<li><p>在Vue修改数据中的某个元素一定要用如下方法：</p>
<p>a. 使用这些变更方法API：push()、pop()、shift()、unshift()、splice()、sort()、reverse()，注意：变更方法，顾名思义，会变更调用了这些方法的原始数组。相比之下，也有非变更方法，例如 <code>filter()</code>、<code>concat()</code> 和 <code>slice()</code>。它们不会变更原始数组，而<strong>总是返回一个新数组</strong>。当使用非变更方法时，可以用新数组替换旧数组：</p>
<p>b. Vue.set() 或 vm.$set()</p>
</li>
</ol>
<p>特别注意：Vue.set()和vm.$set()不能给vm或vm的根数据对象添加属性！！！</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        name: <span class="string">'jam'</span>,</span><br><span class="line">        info: &#123;</span><br><span class="line">            name: <span class="string">'xx'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        arrInfo: [&#123; <span class="attr">name</span>: <span class="string">'xx'</span>&#125;],</span><br><span class="line">        arr: [<span class="string">'吃饭'</span>, <span class="string">'学习'</span>, <span class="string">'睡觉'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.$<span class="keyword">set</span>(vm, 'age', 20);  // error</span><br><span class="line">this.$<span class="keyword">set</span>(vm.data, 'age', 20);  // error</span><br><span class="line">this.$<span class="keyword">set</span>(vm.data.info, 'age', 20);  </span><br><span class="line">// 数组对象，Object.defineProperty，有<span class="keyword">get</span> <span class="keyword">set</span></span><br><span class="line">vm.data.arrInfo[0].name = 'jam';</span><br><span class="line">// 直接通过下标修改数组，界面不会自动更新</span><br><span class="line">vm.data.arrInfo[0] = &#123; name: <span class="string">'jam'</span> &#125;; <span class="comment">// 不能实时响应</span></span><br><span class="line"><span class="comment">// 如果需要唯一ID，可以借助nanoid库，生成的是21位唯一值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组包装劫持7个原型的变更方法，push、pop、unshift、shift、splice、sort、reverse能够监测到数组数据变化</span></span><br><span class="line">vm.data.arr[<span class="number">0</span>] = <span class="string">'饿肚子'</span>; <span class="comment">// 不能实时响应</span></span><br><span class="line">vm.data.arr.splice(<span class="number">0</span>, <span class="number">1</span>, &#123; <span class="attr">name</span>: <span class="string">'jam'</span> &#125;); <span class="comment">// 能实时响应</span></span><br></pre></td></tr></table></figure>
<h2 id="彩蛋"><a href="#彩蛋" class="headerlink" title="彩蛋"></a>彩蛋</h2><ul>
<li>静态服务器，支持history模式 server.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. npm init -y，安装好express + connect-history-api-fallback依赖</span></span><br><span class="line"><span class="comment">// 2. 创建static存放打包好的静态文件</span></span><br><span class="line"><span class="comment">// 3. node server</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> history = <span class="built_in">require</span>(<span class="string">'connect-history-api-fallback'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line">app.use(history)</span><br><span class="line">app.use(express.static(__dirname + <span class="string">'/static'</span>))</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/test'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.send(&#123;</span><br><span class="line">    name: <span class="string">'tom'</span>,</span><br><span class="line">    age: <span class="number">18</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">5005</span>, (err) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">    conosle.log(<span class="string">'服务器启动成功了！'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/框架/">框架</a></div><div class="post-share"></div><div class="post-nav"><a href="/2021/07/14/项目管理精华/" class="next">项目管理精华 - 科丽·科歌昂、叙泽特·布莱克莫尔、詹姆士·伍德</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#风格指南"><span class="toc-text">风格指南</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#环境配置"><span class="toc-text">环境配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vm与vc"><span class="toc-text">vm与vc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指令"><span class="toc-text">指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#过滤器"><span class="toc-text">过滤器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#修饰符"><span class="toc-text">修饰符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#props"><span class="toc-text">props</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#插槽"><span class="toc-text">插槽</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#全局事件总线-eventBus"><span class="toc-text">全局事件总线 eventBus</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vuex"><span class="toc-text">Vuex</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-Router"><span class="toc-text">Vue-Router</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#动画-transition、transition-group"><span class="toc-text">动画 transition、transition-group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代理"><span class="toc-text">代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3"><span class="toc-text">Vue3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-for中的key的有什么作用？"><span class="toc-text">v-for中的key的有什么作用？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模拟一个数据监测"><span class="toc-text">模拟一个数据监测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据双向绑定响应"><span class="toc-text">数据双向绑定响应</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#彩蛋"><span class="toc-text">彩蛋</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/08/11/Vue的旁门左道/">Vue的旁门左道</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/14/项目管理精华/">项目管理精华 - 科丽·科歌昂、叙泽特·布莱克莫尔、詹姆士·伍德</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/04/如何阅读一本书/">如何阅读一本书 - 莫提默·J.艾德勒</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/22/沟通训练营/">沟通训练营</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/20/typescript学习笔记/">typescript学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/12/阐述__proto__和prototype的关系/">阐述__proto__和prototype的关系</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/03/求无序数组第几大的数字/">求无序数组第几大的数字</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/13/call、apply、bind探索之路/">call、apply、bind探索之路</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/25/vue学习心得/">vue2.0学习心得</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/04/js基础和设计模式/">js基础和设计模式</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Jquery/">Jquery</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mockjs/">Mockjs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Seajs/">Seajs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gulp/">gulp</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/less/">less</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/requirejs/">requirejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/typescript/">typescript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习/">学习</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/插件/">插件</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/笔记/">笔记</a><span class="category-list-count">5</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://github.com/liwenxin-jam/" title="个人github" target="_blank">个人github</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><span> Copyright &copy;<a href="/." rel="nofollow">黎文欣.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script></body></html>