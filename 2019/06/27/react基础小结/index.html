<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="liwenxin-jam's blog"><meta name="keywords" content="liwenxin, jam, blog, 个人博客"><title>react基础小结 | 前端工程狮_jam</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">react基础小结</h1><a id="logo" href="/.">前端工程狮_jam</a><p class="description">人都会成长，过程在自己</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">react基础小结</h1><div class="post-meta"><p><span class="date">Jun 27, 2019</span><span><a href="/categories/react/" class="category">react</a></span></p></div><div class="post-content"><p>React 是一个 Facebook 和 Instagram 用来创建用户界面的 JavaScript 库，用于构建“可预期的”和“声明式的”Web 用户界面。该框架的推出主要为了开发随着时间数据不断变化的大规模应用程序，具体文档可以参考<a href="https://reactjs.org/" target="_blank" rel="noopener">官网</a>。</p>
<h2 id="React-具有以下特点："><a href="#React-具有以下特点：" class="headerlink" title="React 具有以下特点："></a>React 具有以下特点：</h2><ul>
<li>1.声明式设计 −React 采用声明范式，可以轻松描述应用。</li>
<li>2.高效 −React 通过对 DOM 的模拟，最大限度地减少与 DOM 的交互。</li>
<li>3.灵活 −React 可以与已知的库或框架很好地配合。</li>
<li>4.JSX − JSX 是 JavaScript 语法的扩展。React 开发不一定使用 JSX ，但我们建议使用它。</li>
<li>5.组件 − 通过 React 构建组件，使得代码更加容易得到复用，能够很好的应用在大项目的开发中。</li>
<li>6.单向响应的数据流 − React 实现了单向响应的数据流，从而减少了重复代码，这也是它为什么比传统数据绑定更简单。</li>
</ul>
<h2 id="1、构建与初始化"><a href="#1、构建与初始化" class="headerlink" title="1、构建与初始化"></a>1、构建与初始化</h2><ul>
<li>方式一：如果你只是想简单尝试下 React，可以使用<a href="https://stackblitz.com/" title="stackblitz" target="_blank" rel="noopener">stackblitz</a>。在这里，我必须安利一下这个在线编辑器，你不需要安装任何东西，目前支持 angular、react、ionic，迟点应该也会支持 vue。支持 github 帐号登录，可以 fork 和 share，一个专门为 Web 构建的更聪明、更快的包管理器。</li>
<li>方式二：可以使用官网推荐用 create-react-app 的方式，是开始构建新的 React 单页面应用的最佳途径。它可以帮你配置开发环境，以便你可以使用最新的 JavaScript 特性，还能提供很棒的开发体验，并为生产环境优化你的应用。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在终端下全局安装官网推荐的create-react-app</span></span><br><span class="line">npm install -g create-react-app</span><br><span class="line">create-react-app my-app</span><br><span class="line">cd my-app</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure>
<ul>
<li>方式三： 可以使用像 webpack 或 Browserify 这样的构建工具，以便于编写模块代码并将其压缩，优化加载时间，这里推荐使用<a href="https://doc.webpack-china.org/" title="webpack" target="_blank" rel="noopener">webpack</a>方式。</li>
</ul>
<h2 id="2、React-元素"><a href="#2、React-元素" class="headerlink" title="2、React 元素"></a>2、React 元素</h2><blockquote>
<p>react 是 React 库的入口点。如果你通过 script 标签加载 React，这些高阶 API 可用于 React 全局。如果你使用 ES6，你可以使用 import React from ‘react’ 。如果你使用 ES5，你可以使用 var React = require(‘react’)</p>
</blockquote>
<ul>
<li><p>创建 React 元素有 3 种方式，注意：官网认为 createFactor 方法过时了，推荐你使用 JSX 或直接使用 React.createElement()来替代它。JSX 可以看做 JavaScript 的语法拓展（eXtension），看起来有点像 XML，让我们可以在 JavaScript 中编写类似 HTML 的代码。使用 React，可以进行 JSX 语法到 JavaScript 的转换。判断一个元素是 HTML 元素还是 React 组件的原则是第一个字母是否大写，如果为大写，则认为是 React 组件，否则认为是 HTML 元素。如果我们自定义的组件首字母写成小写，那会得不到我们想要的结果。在 JSX 中可以通过 onClick 这样的方式来给一个元素添加事件处理函数，在 HTML 我们还可以用 onclick（onclick 和 onClick 是不同的）来添加事件</p>
</li>
<li><p>第一种是 React.createElement(type,[props],[…children])</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> listItemElement1 = React.createElement(</span><br><span class="line">  <span class="string">'li'</span>,</span><br><span class="line">  &#123; <span class="attr">className</span>: <span class="string">'item-1'</span>, <span class="attr">key</span>: <span class="string">'item-1'</span> &#125;,</span><br><span class="line">  <span class="string">'Item-1'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">var</span> listItemElement2 = React.createElement(</span><br><span class="line">  <span class="string">'li'</span>,</span><br><span class="line">  &#123; <span class="attr">className</span>: <span class="string">'item-2'</span>, <span class="attr">key</span>: <span class="string">'item-2'</span> &#125;,</span><br><span class="line">  <span class="string">'Item-2'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">var</span> listItemElement3 = React.createElement(</span><br><span class="line">  <span class="string">'li'</span>,</span><br><span class="line">  &#123; <span class="attr">className</span>: <span class="string">'item-3'</span>, <span class="attr">key</span>: <span class="string">'item-3'</span> &#125;,</span><br><span class="line">  <span class="string">'Item-3'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">var</span> reactFragment = [listItemElement1, listItemElement2, listItemElement3];</span><br><span class="line"><span class="keyword">var</span> listOfItems = React.createElement(</span><br><span class="line">  <span class="string">'ul'</span>,</span><br><span class="line">  &#123; <span class="attr">className</span>: <span class="string">'list-of-items'</span> &#125;,</span><br><span class="line">  reactFragment</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ul>
<li>第二种是通过创建工厂函数 React.createFactory(type)，React.DOM.li(…) 是 React.createELement(‘li’, …) 的一个包装写法，但被官网认为是过时的，有可能最终会被遗弃。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createListItemElement = React.createFactory(<span class="string">'li'</span>);</span><br><span class="line"><span class="keyword">var</span> listItemElement1 = React.DOM.li(</span><br><span class="line">  &#123; <span class="attr">className</span>: <span class="string">'item-1'</span>, <span class="attr">key</span>: <span class="string">'item-1'</span> &#125;,</span><br><span class="line">  <span class="string">'Item-1'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">var</span> listItemElement2 = React.DOM.li(</span><br><span class="line">  &#123; <span class="attr">className</span>: <span class="string">'item-2'</span>, <span class="attr">key</span>: <span class="string">'item-2'</span> &#125;,</span><br><span class="line">  <span class="string">'Item-2'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">var</span> listItemElement3 = React.DOM.li(</span><br><span class="line">  &#123; <span class="attr">className</span>: <span class="string">'item-3'</span>, <span class="attr">key</span>: <span class="string">'item-3'</span> &#125;,</span><br><span class="line">  <span class="string">'Item-3'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">var</span> reactFragment = [listItemElement1, listItemElement2, listItemElement3];</span><br><span class="line"><span class="keyword">var</span> listOfItems = React.createElement(</span><br><span class="line">  <span class="string">'ul'</span>,</span><br><span class="line">  &#123; <span class="attr">className</span>: <span class="string">'list-of-items'</span> &#125;,</span><br><span class="line">  reactFragment</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ul>
<li>第三种是使用 JSX 创建 React 元素，编写 React 的时候，JSX 并不是必须的。每一个 JSX 元素都只是 React.createElement(component, props, …children) 的语法糖。因此，任何时候你用 JSX 语法写的代码也可以用普通的 JavaScript 语法写出来。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var listOfItems =</span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">className</span>=<span class="string">"list-of-items"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">"item-1"</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">"item-2"</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">"item-3"</span>&gt;</span>Item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">;</span><br><span class="line"><span class="comment">&lt;!-- 官网例子jsx写法 --&gt;</span></span><br><span class="line">class Hello extends React.Component &#123; render() &#123; return</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello &#123;this.props.toWhat&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">; &#125; &#125;</span><br><span class="line"><span class="comment">&lt;!-- 编译转成不使用JSX的代码 --&gt;</span></span><br><span class="line">class Hello extends React.Component &#123; render() &#123; return</span><br><span class="line">React.createElement('div', null, `Hello $&#123;this.props.toWhat&#125;`); &#125; &#125;</span><br><span class="line">ReactDOM.render( React.createElement(Hello, &#123;toWhat: 'World'&#125;, null),</span><br><span class="line">document.getElementById('root') );</span><br></pre></td></tr></table></figure>
<ul>
<li>渲染 React 元素</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//格式：ReactDOM.render(ReactElement, DOMElement, callback);</span></span><br><span class="line">ReactDOM.render(listOfItems, <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>));</span><br></pre></td></tr></table></figure>
<h2 id="3、React-组件"><a href="#3、React-组件" class="headerlink" title="3、React 组件"></a>3、React 组件</h2><ul>
<li>可以通过三种方式创建 React 组件，注意，组件类的第一个字母必须大写，否则会报错，比如 HelloMessage 不能写成 helloMessage。另外，组件类只能包含一个顶层标签，否则也会报错。</li>
<li>第一种无状态函数式组件，无状态函数式组件形式上表现为只带有一个 render 方法的组件类，通过函数形式或者 ES6 arrow function 的形式创建，并且该组件是无 state 状态的。只要有可能，尽量使用无状态组件。能用 React.Component 创建的组件的就尽量不用 React.createClass 形式创建组件。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function HelloComponent(props) &#123; return</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello &#123;props.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">; &#125; ReactDOM.render( <span class="tag">&lt;<span class="name">HelloComponent</span> <span class="attr">name</span>=<span class="string">"world"</span> /&gt;</span>,</span><br><span class="line">document.getElementById('example') )</span><br></pre></td></tr></table></figure>
<ul>
<li>第二种 React.createClass，它是 react 刚开始推荐的创建组件的方式，是用 ES5 的写法实现</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var InputControlES5 = React.createClass(&#123; propTypes:</span><br><span class="line">&#123;//定义传入props中的属性各种类型要求，可以接受任意值，字符串、对象、函数等等。</span><br><span class="line">initialValue: React.PropTypes.string.isRequired &#125;, defaultProps: &#123;</span><br><span class="line">//用来设置组件属性的默认值 initialValue: 'Hello World' &#125;, getInitialState:</span><br><span class="line">function() &#123;//用于定义初始状态，也就是一个对象，这个对象可以通过 this.state</span><br><span class="line">属性读取。 return &#123; text: this.props.initialValue || 'placeholder' &#125;; &#125;,</span><br><span class="line">handleChange: function(event) &#123; this.setState(&#123;</span><br><span class="line">//事件的回调函数，当用户交互导致状态变化，this.setState</span><br><span class="line">方法就修改状态值，每次修改以后，自动调用this.render方法，再次渲染组件。 text:</span><br><span class="line">event.target.value &#125;); &#125;, render: function() &#123; return (</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  Type something:</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">"&#123;this.handleChange&#125;"</span> <span class="attr">value</span>=<span class="string">"&#123;this.state.text&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">); &#125; &#125;); ReactDOM.render(</span><br><span class="line"><span class="tag">&lt;<span class="name">InputControlES5</span> /&gt;</span>, document.getElementById('example') )</span><br></pre></td></tr></table></figure>
<ul>
<li>第三种是 React.Component，它是以 ES6 的形式来创建 react 的组件的，是 React 目前极为推荐的创建有状态组件的方式，最终会取代 React.createClass 形式；相对于 React.createClass 可以更好实现代码复用。将上面 React.createClass 的形式改为 React.Component 形式如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class InputControlES6 extends React.Component &#123; constructor(props) &#123;</span><br><span class="line">super(props); //调用super，是为了正确获取到this this.state = &#123; text:</span><br><span class="line">props.initialValue || 'placeholder' &#125;; this.handleChange =</span><br><span class="line">this.handleChange.bind(this); // ES6 类中函数必须手动绑定 &#125; handleChange(event)</span><br><span class="line">&#123; this.setState(&#123; text: event.target.value &#125;); &#125; render() &#123; return (</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  Type something:</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">"&#123;this.handleChange&#125;"</span> <span class="attr">value</span>=<span class="string">"&#123;this.state.text&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">); &#125; &#125; InputControlES6.propTypes = &#123; initialValue:</span><br><span class="line">React.PropTypes.string.isRequired &#125;; InputControlES6.defaultProps = &#123;</span><br><span class="line">initialValue: 'Hello Wrold' &#125;; ReactDOM.render(</span><br><span class="line"><span class="tag">&lt;<span class="name">InputControlES6</span> /&gt;</span>, document.getElementById('example') )</span><br></pre></td></tr></table></figure>
<h2 id="React-createClass-与-React-Component-区别"><a href="#React-createClass-与-React-Component-区别" class="headerlink" title="React.createClass 与 React.Component 区别"></a>React.createClass 与 React.Component 区别</h2><ul>
<li>React.createClass 创建的组件，其每一个成员函数的 this 都有 React 自动绑定，任何时候，直接使用 this.method 即可，函数中的 this 会被正确设置</li>
<li>React.Component 创建的组件，其成员函数不会自动绑定 this，需要开发者手动绑定，否则将它作为事件处理函数被调用时不能通过 this 获取当前组件实例对象。</li>
<li>React.Component 有三种手动绑定方法：<br>1、在构造函数中完成绑定<br>2、调用时使用 method.bind(this)来完成绑定<br>3、使用 arrow function 来绑定</li>
<li>组件属性类型 propTypes 及其默认 props 属性 defaultProps 配置不同。</li>
<li>组件初始状态 state 配置不同。React.createClass 创建的组件，其状态 state 是通过 getInitState 方法方法来配置组件的相关状态。React.Component 创建的组件，其状态 state 是在 construct 中像初始化组件属性一样声明。</li>
<li>Mixins 的支持不同。React.createClass 在创建组件时可以使用 mixins 属性，以数组的形式来混合类的集合。React.Component 不支持 Mixins,React 开发者社区提供了一个全新的方式来取代 Mixins，那就是 Higher-Order Components(高阶组件)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- React.createClass --&gt;</span></span><br><span class="line">const Contacts = React.createClass(&#123;</span><br><span class="line">    handleClick() &#123;</span><br><span class="line">        console.log(this); <span class="comment">&lt;!-- React组件实例 --&gt;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">&lt;!-- React.Component --&gt;</span></span><br><span class="line">class Contacts extends React.Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props);</span><br><span class="line">    &#125;</span><br><span class="line">    handleClick() &#123;</span><br><span class="line">        console.log(this); // null</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">&lt;!-- React.Component绑定this方法 --&gt;</span></span><br><span class="line">constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.handleClick = this.handleClick.bind(this); //构造函数中绑定</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick.bind(this)&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> //使用bind来绑定</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>this.handleClick()&#125;&gt;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> //使用arrow function来绑定</span><br></pre></td></tr></table></figure>
<h2 id="4、React-组件生命周期"><a href="#4、React-组件生命周期" class="headerlink" title="4、React 组件生命周期"></a>4、React 组件生命周期</h2><p>##组件的生命周期分成三个状态：</p>
<ul>
<li>挂载(Mounting): 这个阶段发生在组件被创建并被插入到 DOM 时</li>
<li>更新(Updating): 这个阶段发生在组件被重新渲染成虚拟 DOM 并决定实际 DOM 是否需要更新时</li>
<li>卸载(Unmounting): 这个阶段发生在组件从 DOM 中被删除时</li>
</ul>
<p>##组件挂载阶段</p>
<p>###ES5(React.createClass)</p>
<ul>
<li>getInitialState()</li>
<li>componentWillMount()</li>
<li>render()</li>
<li>componentDidMount()</li>
</ul>
<p>###ES6(React.Component)</p>
<ul>
<li>constructor()</li>
<li>componentWillMount()</li>
<li>render()</li>
<li>componentDidMount()</li>
</ul>
<p>###组件更新阶段</p>
<ul>
<li>componentWillReceiveProps()</li>
<li>shouldComponentUpdate()</li>
<li>componentWillUpdate()</li>
<li>render()</li>
<li>componentDidUpdate()</li>
</ul>
<p>###组件卸载阶段</p>
<ul>
<li>componentWillUnmount()</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var Hello = React.createClass(&#123; getInitialState: function () &#123; return &#123; opacity:</span><br><span class="line">1.0 &#125;; &#125;, componentDidMount: function () &#123; this.timer = setInterval(function ()</span><br><span class="line">&#123; var opacity = this.state.opacity; opacity -= .05; if (opacity <span class="tag">&lt; <span class="attr">0.1</span>) &#123; <span class="attr">opacity</span></span></span><br><span class="line"><span class="tag">= <span class="string">1.0;</span> &#125; <span class="attr">this.setState</span>(&#123; <span class="attr">opacity:</span> <span class="attr">opacity</span> &#125;); &#125;<span class="attr">.bind</span>(<span class="attr">this</span>), <span class="attr">100</span>); &#125;, <span class="attr">render:</span></span></span><br><span class="line"><span class="tag"><span class="attr">function</span> () &#123; <span class="attr">return</span> (</span></span><br><span class="line">&lt;div style="&#123;&#123;opacity:" this.state.opacity&#125;&#125;&gt;Hello &#123;this.props.name&#125;&lt;/div&gt;</span><br><span class="line">); &#125; &#125;); ReactDOM.render(</span><br><span class="line"><span class="tag">&lt;<span class="name">Hello</span> <span class="attr">name</span>=<span class="string">"world"</span> /&gt;</span>, document.body );</span><br></pre></td></tr></table></figure>
<h2 id="5、受控与非受控组件"><a href="#5、受控与非受控组件" class="headerlink" title="5、受控与非受控组件"></a>5、受控与非受控组件</h2><blockquote>
<p>React 通过 props 和 state 来区分组件的属性和状态。其中，props(属性)用来表示组件外部传入的属性，组件内部不能改变。而 state(状态)通常表示组件内部的状态，状态是可以并且应该改变的。React 通过 props 和 state 的值来渲染组件，组件渲染完毕之后，通过响应用户操作或者异步网络请求等操作更新组件的状态来重新渲染组件。</p>
</blockquote>
<ul>
<li>受控组件将表单数据统一存放在 state 中，交由 React 管理，我们就可以根据用户的输入及时作出响应：1、验证输入正确性（输入格式、类型等），并作出反馈。</li>
<li>2、根据输入设置其它组件的状态，譬如输入不规范时，提交按钮处于不可用状态。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class ControlledForm extends React.Component &#123; constructor(props) &#123;</span><br><span class="line">super(props); this.state = &#123; username: '' &#125; this.handleSubmit =</span><br><span class="line">this.handleSubmit.bind(this); this.updateUsername =</span><br><span class="line">this.updateUsername.bind(this); &#125; updateUsername(e) &#123; this.setState(&#123; username:</span><br><span class="line">e.target.value, &#125;) &#125; handleSubmit() &#123;&#125; render () &#123; return (</span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">"&#123;this.handleSubmit&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">value</span>=<span class="string">"&#123;this.state.username&#125;"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">onChange</span>=<span class="string">"&#123;this.updateUsername&#125;"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">) &#125; &#125; ReactDOM.render(<span class="tag">&lt;<span class="name">ControlledForm</span> /&gt;</span>, document.getElementById('react-root'))</span><br></pre></td></tr></table></figure>
<ul>
<li>非受控组件和传统的表单数据管理一样，由 DOM 存放表单数据，可以使用 React 提供的 refs 来获得 DOM 元素的引用。在需要的时候（譬如表单提交的时候）一次性获取表单的值。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class UnControlledForm extends React.Component &#123; constructor(props) &#123;</span><br><span class="line">super(props); this.handleSubmit = this.handleSubmit.bind(this); &#125;</span><br><span class="line">handleSubmit(e) &#123; e.preventDefault(); console.log("Value: ", this.input.value) &#125;</span><br><span class="line">render () &#123; return (</span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">"&#123;this.handleSubmit&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'text'</span> <span class="attr">ref</span>=<span class="string">&#123;(input)</span> =&gt;</span> this.input = input&#125; /&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">) &#125; &#125; ReactDOM.render(<span class="tag">&lt;<span class="name">UnControlledForm</span> /&gt;</span>,</span><br><span class="line">document.getElementById('react-root'));</span><br></pre></td></tr></table></figure>
<ul>
<li>参考文献<br>1、<a href="http://www.ruanyifeng.com/blog/2015/03/react.html" title="阮一峰React 入门实例教程" target="_blank" rel="noopener">阮一峰 React 入门实例教程</a><br>2、<a href="https://github.com/Marco2333/react-demo" title="React从入门到放弃 -- 笔记、教程、Demo" target="_blank" rel="noopener">React 从入门到放弃 – 笔记、教程、Demo</a></li>
</ul>
</div><div class="tags"><a href="/tags/框架/">框架</a></div><div class="post-share"></div><div class="post-nav"><a href="/2019/07/03/table-cell常用应用/" class="pre">table-cell常用应用</a><a href="/2019/05/16/背景图自适应小技巧/" class="next">背景图自适应小技巧</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#React-具有以下特点："><span class="toc-text">React 具有以下特点：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1、构建与初始化"><span class="toc-text">1、构建与初始化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、React-元素"><span class="toc-text">2、React 元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、React-组件"><span class="toc-text">3、React 组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-createClass-与-React-Component-区别"><span class="toc-text">React.createClass 与 React.Component 区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、React-组件生命周期"><span class="toc-text">4、React 组件生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、受控与非受控组件"><span class="toc-text">5、受控与非受控组件</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/08/11/Vue的旁门左道/">Vue的旁门左道</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/14/项目管理精华/">项目管理精华 - 科丽·科歌昂、叙泽特·布莱克莫尔、詹姆士·伍德</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/04/如何阅读一本书/">如何阅读一本书 - 莫提默·J.艾德勒</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/22/沟通训练营/">沟通训练营</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/20/typescript学习笔记/">typescript学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/12/阐述__proto__和prototype的关系/">阐述__proto__和prototype的关系</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/03/求无序数组第几大的数字/">求无序数组第几大的数字</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/13/call、apply、bind探索之路/">call、apply、bind探索之路</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/25/vue学习心得/">vue2.0学习心得</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/04/js基础和设计模式/">js基础和设计模式</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Jquery/">Jquery</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mockjs/">Mockjs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Seajs/">Seajs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gulp/">gulp</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/less/">less</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/requirejs/">requirejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/typescript/">typescript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习/">学习</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/插件/">插件</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/笔记/">笔记</a><span class="category-list-count">5</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://github.com/liwenxin-jam/" title="个人github" target="_blank">个人github</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><span> Copyright &copy;<a href="/." rel="nofollow">黎文欣.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script></body></html>