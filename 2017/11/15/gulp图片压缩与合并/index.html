<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="liwenxin-jam's blog"><meta name="keywords" content="liwenxin, jam, blog, 个人博客"><title>gulp图片压缩与合并 | 前端工程狮_jam</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">gulp图片压缩与合并</h1><a id="logo" href="/.">前端工程狮_jam</a><p class="description">人都会成长，过程在自己</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">gulp图片压缩与合并</h1><div class="post-meta"><p><span class="date">Nov 15, 2017</span><span><a href="/categories/gulp/" class="category">gulp</a></span></p></div><div class="post-content"><p>人都是喜欢偷懒的，而偷懒也是进步的源泉。没有人喜欢做机械化的工作，都想着一键生成或搞掂。例如以前我们如果压缩图片一般会用 tinypng 在线压缩，而合并雪碧图需要用到 PS 来手动合成，本文是借助 gulp 实现图片压缩功能和合并雪碧图。</p>
<h2 id="因为是基于-gulp，肯定是需要安装-gulp-环境，至于是安装的全局环境还是局部依赖，就看个人喜好。"><a href="#因为是基于-gulp，肯定是需要安装-gulp-环境，至于是安装的全局环境还是局部依赖，就看个人喜好。" class="headerlink" title="因为是基于 gulp，肯定是需要安装 gulp 环境，至于是安装的全局环境还是局部依赖，就看个人喜好。"></a>因为是基于 gulp，肯定是需要安装 gulp 环境，至于是安装的全局环境还是局部依赖，就看个人喜好。</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  如果你之前有全局安装过一个版本的 gulp，请执行一下 npm rm --global gulp 来避免和 gulp-cli 冲突</span></span><br><span class="line">npm install --global gulp-cli</span><br><span class="line"><span class="comment">//  基于项目局部安装依赖，需要先基于npm init -y初始化</span></span><br><span class="line">npm install --save-dev gulp</span><br></pre></td></tr></table></figure>
<h2 id="首先给大家介绍图片压缩功能，需要各位自行下载依赖，分别有-gulp-imagemin、imagemin-pngcrush、gulp-del、gulp-notify-等等。在根目录创建一个-gulpfile-js-文件，文件内容如下："><a href="#首先给大家介绍图片压缩功能，需要各位自行下载依赖，分别有-gulp-imagemin、imagemin-pngcrush、gulp-del、gulp-notify-等等。在根目录创建一个-gulpfile-js-文件，文件内容如下：" class="headerlink" title="首先给大家介绍图片压缩功能，需要各位自行下载依赖，分别有 gulp-imagemin、imagemin-pngcrush、gulp del、gulp-notify 等等。在根目录创建一个 gulpfile.js 文件，文件内容如下："></a>首先给大家介绍图片压缩功能，需要各位自行下载依赖，分别有 gulp-imagemin、imagemin-pngcrush、gulp del、gulp-notify 等等。在根目录创建一个 gulpfile.js 文件，文件内容如下：</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  npm install --D gulp del //安装依赖方式</span></span><br><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">  imagemin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>), <span class="comment">// 图片压缩</span></span><br><span class="line">  pngcrush = <span class="built_in">require</span>(<span class="string">'imagemin-pngcrush'</span>),</span><br><span class="line">  del = <span class="built_in">require</span>(<span class="string">'del'</span>), <span class="comment">//  删除文件夹</span></span><br><span class="line">  notify = <span class="built_in">require</span>(<span class="string">'gulp-notify'</span>); <span class="comment">// 提示信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩图片</span></span><br><span class="line">gulp.task(<span class="string">'img'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">'images/*'</span>)</span><br><span class="line">    .pipe(</span><br><span class="line">      imagemin(&#123;</span><br><span class="line">        progressive: <span class="literal">true</span>,</span><br><span class="line">        svgoPlugins: [&#123; <span class="attr">removeViewBox</span>: <span class="literal">false</span> &#125;],</span><br><span class="line">        use: [pngcrush()],</span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'./dist/images/'</span>))</span><br><span class="line">    .pipe(notify(&#123; <span class="attr">message</span>: <span class="string">'img task ok'</span> &#125;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  删除文件及文件夹，在执行打包的时候，一般都需要先清理目标文件夹，以保证每次打包时，都是最新的文件。</span></span><br><span class="line">gulp.task(<span class="string">'clean'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  del(</span><br><span class="line">    [</span><br><span class="line">      <span class="comment">// 这里我们使用一个通配模式来匹配 `mobile` 文件夹中的所有东西</span></span><br><span class="line">      <span class="string">'dist/**/*'</span>,</span><br><span class="line">      <span class="comment">// 我们不希望删掉这个文件，所以我们取反这个匹配模式</span></span><br><span class="line">      <span class="string">'!dist/images/share-weixin.png'</span>,</span><br><span class="line">    ],</span><br><span class="line">    cb</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认任务</span></span><br><span class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.run(<span class="string">'clean'</span>, <span class="string">'img'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  前者是监听路径，后者是task任务名称</span></span><br><span class="line">  gulp.watch(<span class="string">'images/*.png'</span>, [<span class="string">'img'</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="调用测试"><a href="#调用测试" class="headerlink" title="调用测试"></a>调用测试</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gulp  <span class="comment">//  省略task名称，默认会去查找default任务</span></span><br><span class="line">gulp clean</span><br><span class="line">gulp img</span><br><span class="line">gulp <span class="keyword">default</span>  <span class="comment">//  有监听图片文件夹内容变化</span></span><br></pre></td></tr></table></figure>
<h2 id="图片合并雪碧图有两种方式，一种是用-spritesmith-插件，另外一种是-gulp-css-spriter-插件。注释-1-Algorithm-有四个可选值分别为-top-down、left-right、diagonal、alt-diagonal、binary-tree。注释-2cssTemplate-是生成-css-的模板文件可以是字符串也可以是函数。如果是字符串则是对于相对的模板地址。"><a href="#图片合并雪碧图有两种方式，一种是用-spritesmith-插件，另外一种是-gulp-css-spriter-插件。注释-1-Algorithm-有四个可选值分别为-top-down、left-right、diagonal、alt-diagonal、binary-tree。注释-2cssTemplate-是生成-css-的模板文件可以是字符串也可以是函数。如果是字符串则是对于相对的模板地址。" class="headerlink" title="图片合并雪碧图有两种方式，一种是用 spritesmith 插件，另外一种是 gulp-css-spriter 插件。注释 1:Algorithm 有四个可选值分别为 top-down、left-right、diagonal、alt-diagonal、binary-tree。注释 2cssTemplate 是生成 css 的模板文件可以是字符串也可以是函数。如果是字符串则是对于相对的模板地址。"></a>图片合并雪碧图有两种方式，一种是用 spritesmith 插件，另外一种是 gulp-css-spriter 插件。注释 1:Algorithm 有四个可选值分别为 top-down、left-right、diagonal、alt-diagonal、binary-tree。注释 2cssTemplate 是生成 css 的模板文件可以是字符串也可以是函数。如果是字符串则是对于相对的模板地址。</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">  spritesmith = <span class="built_in">require</span>(<span class="string">'gulp.spritesmith'</span>);</span><br><span class="line"><span class="comment">//  spritesmith插件方式</span></span><br><span class="line">gulp.task(<span class="string">'spritesmith1'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">'images/*.png'</span>) <span class="comment">// 需要合并的图片地址</span></span><br><span class="line">    .pipe(</span><br><span class="line">      spritesmith(&#123;</span><br><span class="line">        imgName: <span class="string">'images/sprite.png'</span>, <span class="comment">//  保存合并后图片的地址</span></span><br><span class="line">        cssName: <span class="string">'css/sprite.css'</span>, <span class="comment">// 保存合并后对于css样式的地址</span></span><br><span class="line">        padding: <span class="number">5</span>, <span class="comment">//  合并时两个图片的间距</span></span><br><span class="line">        algorithm: <span class="string">'binary-tree'</span>, <span class="comment">//  注释1</span></span><br><span class="line">        cssTemplate: <span class="string">'css/spritesmithTemplateStr.css'</span>, <span class="comment">// 注释2</span></span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist/'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="在根目录-css-文件夹下新增-spritesmithTemplateStr-css-模板"><a href="#在根目录-css-文件夹下新增-spritesmithTemplateStr-css-模板" class="headerlink" title="在根目录 css 文件夹下新增 spritesmithTemplateStr.css 模板"></a>在根目录 css 文件夹下新增 spritesmithTemplateStr.css 模板</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;#sprites&#125;&#125;</span><br><span class="line">.icon-&#123;&#123;name&#125;&#125;&#123;</span><br><span class="line">    background-image: url("&#123;&#123;escaped_image&#125;&#125;");</span><br><span class="line">    background-position: &#123;&#123;px.offset_x&#125;&#125; &#123;&#123;px.offset_y&#125;&#125;;</span><br><span class="line">    width: &#123;&#123;px.width&#125;&#125;;</span><br><span class="line">    height: &#123;&#123;px.height&#125;&#125;;</span><br><span class="line">&#125;</span><br><span class="line">&#123;&#123;/sprites&#125;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="cssTemplate-如果是函数式的方式"><a href="#cssTemplate-如果是函数式的方式" class="headerlink" title="cssTemplate 如果是函数式的方式"></a>cssTemplate 如果是函数式的方式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'spritesmith2'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">'images/*.png'</span>) <span class="comment">// 需要合并的图片地址</span></span><br><span class="line">    .pipe(</span><br><span class="line">      spritesmith(&#123;</span><br><span class="line">        imgName: <span class="string">'images/sprite.png'</span>, <span class="comment">//  保存合并后图片的地址</span></span><br><span class="line">        cssName: <span class="string">'css/sprite.css'</span>, <span class="comment">// 保存合并后对于css样式的地址</span></span><br><span class="line">        padding: <span class="number">5</span>, <span class="comment">//  合并时两个图片的间距</span></span><br><span class="line">        algorithm: <span class="string">'binary-tree'</span>,</span><br><span class="line">        cssTemplate: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">var</span> arr = [];</span><br><span class="line">          data.sprites.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">sprite</span>) </span>&#123;</span><br><span class="line">            arr.push(</span><br><span class="line">              <span class="string">'.icon-'</span> +</span><br><span class="line">                sprite.name +</span><br><span class="line">                <span class="string">'&#123;'</span> +</span><br><span class="line">                <span class="string">"background-image: url('"</span> +</span><br><span class="line">                sprite.escaped_image +</span><br><span class="line">                <span class="string">"');"</span> +</span><br><span class="line">                <span class="string">'background-position: '</span> +</span><br><span class="line">                sprite.px.offset_x +</span><br><span class="line">                <span class="string">' '</span> +</span><br><span class="line">                sprite.px.offset_y +</span><br><span class="line">                <span class="string">';'</span> +</span><br><span class="line">                <span class="string">'width:'</span> +</span><br><span class="line">                sprite.px.width +</span><br><span class="line">                <span class="string">';'</span> +</span><br><span class="line">                <span class="string">'height:'</span> +</span><br><span class="line">                sprite.px.height +</span><br><span class="line">                <span class="string">';'</span> +</span><br><span class="line">                <span class="string">'&#125;\n'</span></span><br><span class="line">            );</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">return</span> arr.join(<span class="string">''</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist/'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="gulp-css-spriter-插件跟-gulp-css-spriter-插件有点区别，它是允许保留你原来的样式，只是自动调整你原来的-css-代码里的图片地址。"><a href="#gulp-css-spriter-插件跟-gulp-css-spriter-插件有点区别，它是允许保留你原来的样式，只是自动调整你原来的-css-代码里的图片地址。" class="headerlink" title="gulp-css-spriter 插件跟 gulp-css-spriter 插件有点区别，它是允许保留你原来的样式，只是自动调整你原来的 css 代码里的图片地址。"></a>gulp-css-spriter 插件跟 gulp-css-spriter 插件有点区别，它是允许保留你原来的样式，只是自动调整你原来的 css 代码里的图片地址。</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'spriter'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">'./css/spriter.css'</span>) <span class="comment">//  spriter.css这个样式里面什么都不用改，是你想要合并的图就要引用这个样式。 很重要。</span></span><br><span class="line">    .pipe(</span><br><span class="line">      spriter(&#123;</span><br><span class="line">        <span class="comment">// The path and file name of where we will save the sprite sheet</span></span><br><span class="line">        spriteSheet: <span class="string">'./dist/images/spritesheet.png'</span>, <span class="comment">//  这是雪碧图自动合成的图。 很重要</span></span><br><span class="line">        <span class="comment">// Because we don't know where you will end up saving the CSS file at this point in the pipe,</span></span><br><span class="line">        <span class="comment">// we need a litle help identifying where it will be.</span></span><br><span class="line">        pathToSpriteSheetFromCSS: <span class="string">'../images/spritesheet.png'</span>, <span class="comment">// 这是在css引用的图片路径，很重要</span></span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'./dist/css'</span>)); <span class="comment">//最后生成出来</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认任务</span></span><br><span class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.run(<span class="string">'clean'</span>, <span class="string">'img'</span>, <span class="string">'spriter'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Watch image files， 前者是监听路径，后者是task任务名称</span></span><br><span class="line">  gulp.watch(<span class="string">'images/*.png'</span>, [<span class="string">'img'</span>, <span class="string">'spriter'</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="在根目录-css-文件夹下新增-spriter-css-样式，测试匹配上面-gulp-css-spriter-插件合并图需要修改的引入样式"><a href="#在根目录-css-文件夹下新增-spriter-css-样式，测试匹配上面-gulp-css-spriter-插件合并图需要修改的引入样式" class="headerlink" title="在根目录 css 文件夹下新增 spriter.css 样式，测试匹配上面 gulp-css-spriter 插件合并图需要修改的引入样式"></a>在根目录 css 文件夹下新增 spriter.css 样式，测试匹配上面 gulp-css-spriter 插件合并图需要修改的引入样式</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.icon-finished-Furniture-menu1</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'../images/finished-Furniture-menu1.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-finished-Furniture-menu1_active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'../images/finished-Furniture-menu1_active.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-finished-Furniture-menu2</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'../images/finished-Furniture-menu2.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-finished-Furniture-menu2_active</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'../images/finished-Furniture-menu2_active.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-finished-Furniture-menu3</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'../images/finished-Furniture-menu3.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-finished-Furniture-menu3_active</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'../images/finished-Furniture-menu3_active.png'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="调用测试-1"><a href="#调用测试-1" class="headerlink" title="调用测试"></a>调用测试</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gulp  <span class="comment">//省略task名称，默认会去查找default任务</span></span><br><span class="line">gulp clean</span><br><span class="line">gulp spritesmith1</span><br><span class="line">gulp spritesmith2</span><br><span class="line">gulp spriter</span><br><span class="line">gulp <span class="keyword">default</span>  <span class="comment">//有监听图片文件夹内容变化</span></span><br></pre></td></tr></table></figure>
<ul>
<li>参考文献<br>1、<a href="https://www.cnblogs.com/qianlitiaotiao/p/5054231.html" target="_blank" rel="noopener">gulp 多张图片自动合成雪碧图</a><br>2、<a href="https://www.cnblogs.com/alone2015/p/5328079.html" target="_blank" rel="noopener">把所有的小图标一起做成雪碧图吧 请用 gulp-css-spriter</a></li>
</ul>
</div><div class="tags"><a href="/tags/工具/">工具</a></div><div class="post-share"></div><div class="post-nav"><a href="/2017/12/25/require.js和r.js使用小结/" class="pre">require.js和r.js使用小结</a><a href="/2017/10/04/jQuery插件的写法以及使用/" class="next">jQuery插件的写法以及使用</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#因为是基于-gulp，肯定是需要安装-gulp-环境，至于是安装的全局环境还是局部依赖，就看个人喜好。"><span class="toc-text">因为是基于 gulp，肯定是需要安装 gulp 环境，至于是安装的全局环境还是局部依赖，就看个人喜好。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#首先给大家介绍图片压缩功能，需要各位自行下载依赖，分别有-gulp-imagemin、imagemin-pngcrush、gulp-del、gulp-notify-等等。在根目录创建一个-gulpfile-js-文件，文件内容如下："><span class="toc-text">首先给大家介绍图片压缩功能，需要各位自行下载依赖，分别有 gulp-imagemin、imagemin-pngcrush、gulp del、gulp-notify 等等。在根目录创建一个 gulpfile.js 文件，文件内容如下：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调用测试"><span class="toc-text">调用测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#图片合并雪碧图有两种方式，一种是用-spritesmith-插件，另外一种是-gulp-css-spriter-插件。注释-1-Algorithm-有四个可选值分别为-top-down、left-right、diagonal、alt-diagonal、binary-tree。注释-2cssTemplate-是生成-css-的模板文件可以是字符串也可以是函数。如果是字符串则是对于相对的模板地址。"><span class="toc-text">图片合并雪碧图有两种方式，一种是用 spritesmith 插件，另外一种是 gulp-css-spriter 插件。注释 1:Algorithm 有四个可选值分别为 top-down、left-right、diagonal、alt-diagonal、binary-tree。注释 2cssTemplate 是生成 css 的模板文件可以是字符串也可以是函数。如果是字符串则是对于相对的模板地址。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在根目录-css-文件夹下新增-spritesmithTemplateStr-css-模板"><span class="toc-text">在根目录 css 文件夹下新增 spritesmithTemplateStr.css 模板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cssTemplate-如果是函数式的方式"><span class="toc-text">cssTemplate 如果是函数式的方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gulp-css-spriter-插件跟-gulp-css-spriter-插件有点区别，它是允许保留你原来的样式，只是自动调整你原来的-css-代码里的图片地址。"><span class="toc-text">gulp-css-spriter 插件跟 gulp-css-spriter 插件有点区别，它是允许保留你原来的样式，只是自动调整你原来的 css 代码里的图片地址。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在根目录-css-文件夹下新增-spriter-css-样式，测试匹配上面-gulp-css-spriter-插件合并图需要修改的引入样式"><span class="toc-text">在根目录 css 文件夹下新增 spriter.css 样式，测试匹配上面 gulp-css-spriter 插件合并图需要修改的引入样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调用测试-1"><span class="toc-text">调用测试</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/08/11/Vue的旁门左道/">Vue的旁门左道</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/14/项目管理精华/">项目管理精华 - 科丽·科歌昂、叙泽特·布莱克莫尔、詹姆士·伍德</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/04/如何阅读一本书/">如何阅读一本书 - 莫提默·J.艾德勒</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/22/沟通训练营/">沟通训练营</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/20/typescript学习笔记/">typescript学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/12/阐述__proto__和prototype的关系/">阐述__proto__和prototype的关系</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/03/求无序数组第几大的数字/">求无序数组第几大的数字</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/13/call、apply、bind探索之路/">call、apply、bind探索之路</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/25/vue学习心得/">vue2.0学习心得</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/04/js基础和设计模式/">js基础和设计模式</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Jquery/">Jquery</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mockjs/">Mockjs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Seajs/">Seajs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gulp/">gulp</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/less/">less</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/requirejs/">requirejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/typescript/">typescript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习/">学习</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/插件/">插件</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/笔记/">笔记</a><span class="category-list-count">5</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://github.com/liwenxin-jam/" title="个人github" target="_blank">个人github</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><span> Copyright &copy;<a href="/." rel="nofollow">黎文欣.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script></body></html>